<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.14.0"/><meta name="theme-color" content="#663399"/><style data-href="/styles.3fdc60033d2aca0ae1e3.css" data-identity="gatsby-global-css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15}body{margin:0}main{display:block}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15}button,input{overflow:visible}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;white-space:normal}progress{vertical-align:baseline}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden]{display:none}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:0 0;color:#f8f8f2;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:0 1px rgba(0,0,0,.3);white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{border-radius:.3em;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#282c34}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#5fb3b3}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#fc929e}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#8dc891}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#79b6f2}.token.keyword{color:#c5a5c5}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}a,abbr,acronym,address,applet,article,aside,audio,big,blockquote,body,canvas,caption,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,ul,var,video{word-break:break-word}blockquote p{font-weight:300}.site-header-content{position:relative;z-index:10}.gdtactics{background:#e2e8f0;border-radius:.5rem;color:#1e293b;font-size:1.75rem;margin-top:1rem;padding:1rem 2rem}@media (min-width:768px){.gdtactics{font-size:2.5rem}}a,abbr,acronym,address,applet,article,aside,audio,big,blockquote,body,canvas,caption,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,iframe,img,ins,kbd,label,legend,li,mark,menu,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strike,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,tt,ul,var,video{border:0;font:inherit;font-size:100%;margin:0;padding:0;vertical-align:baseline}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:after,blockquote:before,q:after,q:before{content:"";content:none}img{max-width:100%}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;box-sizing:border-box;font-family:sans-serif}*,:after,:before{box-sizing:inherit}a{background-color:transparent}a:active,a:hover{outline:0}b,strong{font-weight:700}dfn,em,i{font-style:italic}h1{font-size:2em;margin:.67em 0}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}mark{background-color:#fdffb6}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{border:none;overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input:focus{outline:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}legend{border:0;padding:0}textarea{overflow:auto}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}html{-webkit-tap-highlight-color:rgba(0,0,0,0);font-size:62.5%;overflow-y:scroll}body,html{overflow-x:hidden}body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-moz-font-feature-settings:"liga" on;background:#fff;color:#3c484e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:1.6rem;font-style:normal;font-weight:400;letter-spacing:0;line-height:1.75em;text-rendering:optimizeLegibility}::selection{background:#cbeafb;text-shadow:none}hr{border:0;border-top:1px solid #e3e9ed;display:block;height:1px;margin:2.5em 0 3.5em;padding:0;position:relative;width:100%}audio,canvas,iframe,img,svg,video{vertical-align:middle}fieldset{border:0;margin:0;padding:0}textarea{resize:vertical}blockquote,dl,ol,p,ul{margin:0 0 1.5em}ol,ul{padding-left:1.3em;padding-right:1.5em}ol ol,ol ul,ul ol,ul ul{margin:.5em 0 1em}ul{list-style:disc}ol{list-style:decimal}li{line-height:1.6em;margin:.5em 0;padding-left:.3em}dt{color:#15171a;float:left;font-weight:500;margin:0 20px 0 0;text-align:right;width:120px}dd{margin:0 0 5px;text-align:left}blockquote{border-left:.5em solid #e5eff5;margin:1.5em 0;padding:0 1.6em}blockquote p{font-size:1.2em;font-weight:400;line-height:1.6em;margin:.8em 0}blockquote small{display:inline-block;font-size:.9em;margin:.8em 0 .8em 1.5em;opacity:.8}blockquote small:before{content:"\2014 \00A0"}blockquote cite{font-weight:700}blockquote cite a{font-weight:400}a{color:#26a8ed;text-decoration:none}a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{font-weight:700;line-height:1.15;margin-top:0;text-rendering:optimizeLegibility}h1{font-size:5rem;font-weight:700;margin:0 0 .5em}@media (max-width:500px){h1{font-size:2.2rem}}h2{font-size:2rem;margin:1.5em 0 .5em}@media (max-width:500px){h2{font-size:1.8rem}}h3{font-size:1.8rem;font-weight:500;margin:1.5em 0 .5em}@media (max-width:500px){h3{font-size:1.7rem}}h4{font-size:1.6rem}h4,h5,h6{font-weight:500;margin:1.5em 0 .5em}h5,h6{font-size:1.4rem}body{background:#f4f8fb}.img{background-position:50%;background-size:cover;border-radius:100%;display:block;height:100%;width:100%}.hidden{position:absolute;text-indent:-9999px;visibility:hidden}.site-wrapper{display:flex;flex-direction:column;min-height:100vh}.site-main{flex-grow:1;z-index:90}.outer{padding:0 4vw;position:relative}.inner{margin:0 auto;max-width:1040px;width:100%}@media (min-width:900px){.author-template .post-feed,.home-template .post-feed,.tag-template .post-feed{list-style-type:none;margin-top:-70px;padding-top:0}.post-feed li{padding:0}.home-template .site-nav{position:relative;top:-70px}}.site-header{background:#090a0b no-repeat 50%;background-size:cover;color:#fff;padding-bottom:0;padding-top:0;position:relative}.site-header:before{background:rgba(0,0,0,.18);bottom:0}.site-header:after,.site-header:before{content:"";display:block;left:0;position:absolute;right:0;top:0;z-index:10}.site-header:after{background:linear-gradient(rgba(0,0,0,.1),transparent);bottom:auto;height:80px}.site-header.no-cover:after,.site-header.no-cover:before{display:none}.site-header-content{align-items:center;display:flex;flex-direction:column;justify-content:center;max-height:450px;min-height:200px;padding:10vw 4vw;text-align:center}.site-title{font-size:3.8rem;font-weight:700;margin:0;padding:0;z-index:10}.site-logo{max-height:45px}.site-description{font-size:2.2rem;font-weight:300;letter-spacing:.5px;margin:0;opacity:.8;padding:5px 0;z-index:10}@media (max-width:500px){.site-title{font-size:3rem}.site-description{font-size:1.8rem}}.site-nav{align-items:flex-start;font-size:1.2rem;height:40px;justify-content:space-between;position:relative;z-index:300}.site-nav,.site-nav-left{display:flex;overflow-y:hidden}.site-nav-left{-webkit-overflow-scrolling:touch;-ms-overflow-scrolling:touch;align-items:center;letter-spacing:.4px;margin-right:10px;overflow-x:auto;padding-bottom:80px;white-space:nowrap}.site-nav-logo{color:#fff;display:block;flex-shrink:0;font-size:1.7rem;font-weight:700;letter-spacing:-.5px;line-height:1em;margin-right:24px;padding:11px 0}.site-nav-logo:hover{text-decoration:none}.site-nav-logo img{display:block;height:21px;width:auto}.nav{display:flex;list-style:none;margin:0 0 0 -12px;padding:0}.nav li{padding:0;text-transform:uppercase}.nav li,.nav li a{display:block;margin:0}.nav li a{color:#fff;opacity:.8;padding:10px 12px}.nav li a:hover{opacity:1;text-decoration:none}.site-nav-right{height:40px}.site-nav-right,.social-links{align-items:center;display:flex;flex-shrink:0}.social-links a:last-of-type{padding-right:20px}.social-link{align-items:center;color:#fff;display:flex;justify-content:center;margin:0;opacity:.8;padding:10px}.social-link:hover{opacity:1}.social-link svg{fill:#fff;height:1.8rem}.social-link-fb svg{height:1.5rem}.social-link-wb svg{height:1.6rem}.social-link-wb svg path{stroke:#fff}.social-link-rss svg{height:1.9rem}.subscribe-button{border:1px solid #fff;border-radius:10px;color:#fff;display:block;font-size:1.2rem;line-height:1em;opacity:.8;padding:4px 10px}.subscribe-button:hover{opacity:1;text-decoration:none}.rss-button{opacity:.8}.rss-button:hover{opacity:1}.rss-button svg{fill:#fff;height:2.1rem;margin-bottom:1px}@media (max-width:700px){.site-header{padding-left:0;padding-right:0}.site-nav-left{margin-right:0;padding-left:4vw}.site-nav-right{display:none}}.post-feed{flex-wrap:wrap;margin:0 -20px;padding:40px 0 0;position:relative}.post-card,.post-feed{display:flex}.post-card{background:#fff 50%;background-size:cover;border-radius:5px;box-shadow:8px 14px 38px rgba(39,44,49,.06),1px 3px 8px rgba(39,44,49,.03);flex:1 1 300px;flex-direction:column;margin:0 20px 40px;min-height:300px;overflow:hidden;transition:all .5s ease}.post-card:hover{box-shadow:0 0 1px rgba(39,44,49,.1),0 3px 16px rgba(39,44,49,.07);transform:translate3D(0,-1px,0);transition:all .3s ease}.post-card-image-link{border-radius:5px 5px 0 0;display:block;overflow:hidden;position:relative}.post-card-image{background:#c5d2d9 no-repeat 50%;background-size:cover;height:200px;width:auto}.post-card-content-link{color:#15171a;display:block;padding:25px 25px 0;position:relative}.post-card-content-link:hover{text-decoration:none}.post-card-tags{color:#738a94;display:block;font-size:1.2rem;font-weight:500;letter-spacing:.5px;line-height:1.15em;margin-bottom:4px;text-transform:uppercase}.post-card-title{margin-top:0}.post-card-content{display:flex;flex-direction:column;flex-grow:1;justify-content:space-between}.post-card-meta{padding:0 25px 25px}.author-profile-image{border-radius:100%;height:25px;object-fit:cover;width:25px}.post-card-author{font-size:1.3rem;font-weight:500;letter-spacing:.5px;text-transform:uppercase}@media (min-width:795px){.home-template .post-feed .post-card:nth-child(6n+1):not(.no-image){flex:1 1 100%;flex-direction:row}.home-template .post-feed .post-card:nth-child(6n+1):not(.no-image) .post-card-image-link{border-radius:5px 0 0 5px;flex:1 1 auto;position:relative}.home-template .post-feed .post-card:nth-child(6n+1):not(.no-image) .post-card-image{height:100%;position:absolute;width:100%}.home-template .post-feed .post-card:nth-child(6n+1):not(.no-image) .post-card-content{flex:0 1 357px}.home-template .post-feed .post-card:nth-child(6n+1):not(.no-image) h2{font-size:2.6rem}.home-template .post-feed .post-card:nth-child(6n+1):not(.no-image) p{font-size:1.8rem;line-height:1.55em}.home-template .post-feed .post-card:nth-child(6n+1):not(.no-image) .post-card-content-link{padding:30px 40px 0}.home-template .post-feed .post-card:nth-child(6n+1):not(.no-image) .post-card-meta{padding:0 40px 30px}}.home-template .site-header:after{display:none}@media (max-width:650px){.post-feed{padding-top:5vw}.post-card{margin:0 20px 5vw}}.page-template .site-main,.post-template .site-main{background:#fff;padding-bottom:4vw}.post-full{position:relative;z-index:50}.post-full-header{margin:0 auto;max-width:1040px;padding:6vw 3vw 3vw;text-align:center}@media (max-width:500px){.post-full-header{padding:14vw 3vw 10vw}}.post-full-meta{align-items:center;color:#738a94;display:flex;font-size:1.4rem;font-weight:600;justify-content:center;text-transform:uppercase}.post-full-meta-date{color:#3eb0ef}.post-full-title{color:#090a0b;margin:0}.date-divider{display:inline-block;margin:0 6px 1px}.post-full-image{background:#c5d2d9 50%;background-size:cover;border-radius:5px;height:800px;margin:0 -10vw -165px}@media (max-width:1170px){.post-full-image{border-radius:0;height:600px;margin:0 -4vw -100px}}@media (max-width:800px){.post-full-image{height:400px}}.post-full-content{background:#fff;font-family:Georgia,serif;font-size:2.2rem;line-height:1.6em;margin:0 auto;min-height:230px;padding:70px 100px 0;position:relative}@media (max-width:1170px){.post-full-content{padding:5vw 7vw 0}}@media (max-width:800px){.post-full-content{font-size:1.9rem}}.post-full-content:before{left:-5px;transform:rotate(-5deg)}.post-full-content:after,.post-full-content:before{background:rgba(39,44,49,.15);content:"";display:block;filter:blur(5px);height:200px;position:absolute;top:15px;width:20px;z-index:-1}.post-full-content:after{right:-5px;transform:rotate(5deg)}.no-image .post-full-content{padding-top:0}.no-image .post-full-content:after,.no-image .post-full-content:before{display:none}.kg-card-markdown{align-items:center;display:flex;flex-direction:column;max-width:920px}.footnotes,.post-full-comments,.post-full-content blockquote,.post-full-content dl,.post-full-content h1,.post-full-content h2,.post-full-content h3,.post-full-content h4,.post-full-content h5,.post-full-content h6,.post-full-content ol,.post-full-content p,.post-full-content pre,.post-full-content ul{min-width:100%}.post-full-content li{word-break:break-word}.post-full-content li p{margin:0}.post-template .kg-card-markdown>p:first-child{font-size:1.25em;line-height:1.5em}.post-full-content a{box-shadow:inset 0 -1px 0 #3eb0ef;color:#000}.post-full-content a:hover{color:#3eb0ef;text-decoration:none}.post-full-content em,.post-full-content strong{color:#090a0b}.post-full-content small{display:inline-block;line-height:1.6em}.post-full-content li:first-child{margin-top:0}.post-full-content img,.post-full-content video{display:block;margin:1.5em auto;max-width:1040px}@media (max-width:1040px){.post-full-content img,.post-full-content video{width:100%}}.post-full-content img[src$="#full"]{max-width:none;width:100vw}.post-full-content img+br+small{display:block;margin-bottom:1.5em;margin-top:-3em}.post-full-content iframe{margin:0 auto}.post-full-content blockquote{border-left:3px solid #3eb0ef;margin:0 0 1.5em;padding:0 1.5em}.post-full-content blockquote p{color:inherit;font-size:inherit;font-style:italic;line-height:inherit;margin:0 0 1em}.post-full-content blockquote p:last-child{margin-bottom:0}.post-full-content code{background:#e5eff5;border-radius:3px;font-size:.8em;font-weight:400!important;line-height:1em;padding:0 5px 2px}.post-full-content pre{background:#0e0f11;border:1px solid #000;border-radius:5px;color:#e5eff5;font-size:1.4rem;line-height:1.5em;margin:1.5em 0 3em;max-width:100%;overflow-x:auto;padding:20px}.post-full-content pre code{background:transparent;font-size:inherit;line-height:inherit;padding:0}.post-full-content .fluid-width-video-wrapper{margin:1.5em 0 3em}.post-full-content hr{margin:4vw 0}.post-full-content hr:after{background:#e3e9ed;box-shadow:0 0 0 5px #fff;content:"";display:block;height:30px;left:50%;margin-left:-10px;position:absolute;top:-15px;transform:rotate(45deg);width:1px}.post-full-content h1,.post-full-content h2,.post-full-content h3,.post-full-content h4,.post-full-content h5,.post-full-content h6{color:#090a0b;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif}.post-full-content h1{font-size:4.6rem;font-weight:700;margin:.5em 0 .2em}@media (max-width:500px){.post-full-content h1{font-size:2.8rem}}.post-full-content h2{font-size:3.6rem;font-weight:700;margin:.5em 0 .2em}@media (max-width:500px){.post-full-content h2{font-size:2.6rem}}.post-full-content h3{font-size:2.8rem;font-weight:700;margin:.5em 0 .2em}@media (max-width:500px){.post-full-content h3{font-size:2.2rem}}.post-full-content h4{font-size:2.8rem;font-weight:700;margin:.5em 0 .2em}@media (max-width:500px){.post-full-content h4{font-size:2.2rem}}.post-full-content h5{border:0;color:#3eb0ef;display:block;font-family:Georgia,serif;font-size:3.2rem;line-height:1.35em;margin:.5em 0;padding:1em 0 1.5em;text-align:center}@media (min-width:1180px){.post-full-content h5{max-width:1060px;width:100vw}}@media (max-width:500px){.post-full-content h5{font-size:2.2rem;padding:0 0 .5em}}.post-full-content h6{font-size:2.3rem;font-weight:700;margin:.5em 0 .2em}@media (max-width:500px){.post-full-content h6{font-size:2rem}}.footnotes-sep{margin-bottom:30px}.footnotes{font-size:1.5rem}.footnotes p{margin:0}.footnote-backref{box-shadow:none!important;color:#3eb0ef!important;font-size:1.2rem;font-weight:700;text-decoration:none!important}@media (max-width:500px){.post-full-meta{font-size:1.2rem;line-height:1.3em}.post-full-title{font-size:2.9rem}.post-full-image{height:350px;margin-bottom:4vw}.post-full-content{padding:0}.post-full-content:after,.post-full-content:before{display:none}}.post-full-content table{-webkit-overflow-scrolling:touch;background:radial-gradient(ellipse at left,rgba(0,0,0,.2) 0,transparent 75%) 0,radial-gradient(ellipse at right,rgba(0,0,0,.2) 0,transparent 75%) 100%;background-attachment:scroll,scroll;background-repeat:no-repeat;background-size:10px 100%,10px 100%;border-collapse:collapse;border-spacing:0;display:inline-block;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-size:1.6rem;margin:.5em 0 2.5em;max-width:100%;overflow-x:auto;vertical-align:top;white-space:nowrap;width:auto}.post-full-content table td:first-child{background-image:linear-gradient(90deg,#fff 50%,hsla(0,0%,100%,0));background-repeat:no-repeat;background-size:20px 100%}.post-full-content table td:last-child{background-image:linear-gradient(270deg,#fff 50%,hsla(0,0%,100%,0));background-position:100% 0;background-repeat:no-repeat;background-size:20px 100%}.post-full-content table th{background-color:#f4f8fb;color:#15171a;font-size:1.2rem;font-weight:700;letter-spacing:.2px;text-align:left;text-transform:uppercase}.post-full-content table td,.post-full-content table th{border:1px solid #e3ecf3;padding:6px 12px}.subscribe-form{background:#f4f8fb;border:1px solid #edf4f8;border-radius:7px;margin:1.5em 0;padding:6.5vw 7vw 7vw;text-align:center}.subscribe-form-title{color:#15171a;font-size:3.5rem;font-weight:700;line-height:1;margin:0 0 3px;padding:0}.subscribe-form p{color:#738a94;font-size:2.2rem;letter-spacing:.2px;line-height:1.55em;margin-bottom:1em}.subscribe-form form{align-items:center;display:flex;justify-content:center;margin:0 auto;max-width:420px}.subscribe-form .form-group{flex-grow:1}.subscribe-email{-webkit-appearance:none;border:1px solid #dae2e7;border-radius:5px;color:#738a94;display:block;font-size:1.8rem;font-weight:400;line-height:1em;padding:10px;transition:border-color .15s linear;-webkit-user-select:text;user-select:text;width:100%}.subscribe-form button{-webkit-font-smoothing:subpixel-antialiased;background:linear-gradient(#4fb7f0,#29a0e0 60%,#29a0e0 90%,#36a6e2);border-radius:5px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.14);color:#fff;display:inline-block;font-size:1.5rem;font-weight:400;height:41px;line-height:37px;margin:0 0 0 10px;outline:none;padding:0 20px;text-align:center;text-shadow:0 -1px 0 rgba(0,0,0,.1)}.subscribe-form button:active,.subscribe-form button:focus{background:#209cdf}@media (max-width:650px){.subscribe-form-title{font-size:2.4rem}.subscribe-form p{font-size:1.6rem}}@media (max-width:500px){.subscribe-form form{flex-direction:column}.subscribe-form .form-group{width:100%}.subscribe-form button{margin:10px 0 0;width:100%}}.post-full-footer{justify-content:space-between;margin:0 auto;max-width:840px;padding:3vw 0 6vw}.author-card,.post-full-footer{align-items:center;display:flex}.author-card .author-profile-image{height:150px;width:150px}.author-card-name{font-size:2rem;margin:0 0 2px;padding:0}.author-card-name a{color:#15171a;font-weight:700}.author-card-name a:hover{text-decoration:none}.author-card-content{margin-left:15px}.author-card-content p{color:#738a94;line-height:1.3em;margin:0}.post-full-footer-right{flex-shrink:0;margin-left:20px}.author-card-button{border:1px solid #aebbc1;border-radius:20px;color:#738a94;display:block;font-size:1.2rem;font-weight:500;line-height:1;padding:9px 16px;transition:all .2s ease}.author-card-button:hover{border-color:#3eb0ef;color:#3eb0ef;text-decoration:none}.post-full-comments{margin:0 auto;max-width:840px}.read-next-feed{flex-wrap:wrap;margin:0 -20px;padding:40px 0 0}.read-next-card,.read-next-feed{display:flex}.read-next-card{background:#15171a 50%;background-size:cover;border-radius:5px;box-shadow:8px 14px 38px rgba(39,44,49,.06),1px 3px 8px rgba(39,44,49,.03);color:#fff;flex:1 1 300px;flex-direction:column;margin:0 20px 40px;overflow:hidden;padding:25px;position:relative}.read-next-card:before{-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px);background:linear-gradient(135deg,rgba(0,40,60,.8),rgba(0,20,40,.7));border-radius:5px;bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.read-next-card-header{padding-top:20px;position:relative;text-align:center;z-index:50}.read-next-card-header-sitetitle{display:block;font-size:1.3rem;line-height:1.3em;opacity:.8}.read-next-card-header-title{color:#fff;font-size:3rem;letter-spacing:1px;line-height:1.2em;margin:0;padding:0 20px}.read-next-card-header-title a{color:#fff;font-weight:300;text-decoration:none}.read-next-card-header-title a:hover{text-decoration:none}.read-next-divider{display:flex;height:80px;justify-content:center;position:relative}.read-next-divider svg{stroke:#fff;fill:transparent;stroke-width:.5px;stroke-opacity:.65;width:40px}.read-next-card-content{display:flex;flex-grow:1;font-size:1.7rem;position:relative;z-index:50}.read-next-card-content ul{display:flex;flex-direction:column;list-style:none;margin:0 auto;padding:0;text-align:center}.read-next-card-content li{font-size:1.6rem;font-weight:200;letter-spacing:-.5px;line-height:1.25em;margin:0;padding:0}.read-next-card-content li a{border-bottom:1px solid hsla(0,0%,100%,.3);color:#fff;display:block;font-weight:500;padding:20px 0;transition:opacity .3s ease;vertical-align:top}.read-next-card-content li:first-of-type a{padding-top:10px}.read-next-card-content li a:hover{opacity:1}.read-next-card-footer{margin:15px 0 3px;position:relative;text-align:center}.read-next-card-footer a{color:#fff}.floating-header{align-items:center;background:hsla(0,0%,100%,.95);border-bottom:1px solid rgba(0,0,0,.06);display:flex;height:60px;left:0;position:fixed;right:0;top:0;transform:translate3d(0,-120%,0);transition:all .5s cubic-bezier(.19,1,.22,1);visibility:hidden;z-index:1000}.floating-active{transform:translateZ(0);transition:all .5s cubic-bezier(.22,1,.27,1);visibility:visible}.floating-header-logo{font-size:1.6rem;letter-spacing:-1px;line-height:1em;margin:0 0 0 20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.floating-header-logo a{align-items:center;color:#15171a;display:flex;font-weight:700;line-height:1.1em}.floating-header-logo a:hover{text-decoration:none}.floating-header-logo img{margin:0 10px 0 0;max-height:20px}.floating-header-divider{line-height:1em;margin:0 5px}.floating-header-title{color:#2e2e2e;flex:1 1;font-size:1.6rem;font-weight:700;line-height:1.3em;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.floating-header-share{font-size:1.3rem;justify-content:flex-end;line-height:1;padding-left:2%}.floating-header-share,.floating-header-share a{align-items:center;display:flex}.floating-header-share a{justify-content:center}.floating-header-share svg{fill:#fff;height:16px;width:auto}.floating-header-share-label{align-items:center;color:rgba(0,0,0,.7);display:flex;flex-shrink:0;font-weight:500;margin-right:10px}.floating-header-share-label svg{stroke:rgba(0,0,0,.7);height:18px;margin:0 5px 0 10px;transform:rotate(90deg);width:18px}.floating-header-share-fb,.floating-header-share-tw{-ms-flex-align:center;-ms-grid-row-align:center;align-items:center;color:#fff;display:block;height:60px;line-height:48px;text-align:center;transition:all .5s cubic-bezier(.19,1,.22,1);width:60px}.floating-header-share-tw{background:#33b1ff}.floating-header-share-fb{background:#005e99}.progress{-webkit-appearance:none;appearance:none;background:transparent;border:none;bottom:-1px;color:#3eb0ef;height:2px;left:0;position:absolute;right:0;width:100%}.progress::-webkit-progress-bar{background-color:transparent}.progress::-webkit-progress-value{background-color:#3eb0ef}.progress::-moz-progress-bar{background-color:#3eb0ef}.progress-container{background-color:transparent;display:block;height:2px;left:0;position:absolute;top:0;width:100%}.progress-bar{background-color:#3eb0ef;display:block;height:inherit;width:50%}@media (max-width:900px){.floating-header{height:40px}.floating-header-logo,.floating-header-title{font-size:1.5rem}.floating-header-share-fb,.floating-header-share-tw{height:40px;line-height:38px;width:40px}}@media (max-width:800px){.floating-header-logo{margin-left:10px}.floating-header-logo a{color:#2e2e2e}.floating-header-divider,.floating-header-title{visibility:hidden}}@media (max-width:450px){.floating-header-share-label{display:none}}.site-header-content .author-profile-image{box-shadow:0 0 0 6px hsla(0,0%,100%,.1);flex-shrink:0;height:100px;margin:0 0 20px;width:100px;z-index:10}.site-header-content .author-bio{flex-shrink:0;font-size:2rem;font-weight:300;letter-spacing:.5px;line-height:1.3em;margin:5px 0 10px;max-width:600px;opacity:.8;z-index:10}.site-header-content .author-meta{align-items:center;display:flex;flex-shrink:0;font-family:Georgia,serif;font-style:italic;justify-content:center;margin:0 0 10px;z-index:10}.site-header-content .author-location svg{stroke:#fff;height:1.9rem}.site-header-content .bull{display:inline-block;margin:0 12px;opacity:.5}.site-header-content .social-link:first-of-type{padding-left:4px}@media (max-width:500px){.site-header-content .author-bio{font-size:1.8rem;letter-spacing:0;line-height:1.15em}.author-location,.author-stats{display:none}}.error-template .site-main{padding:7vw 4vw}.site-nav-center{align-items:center;display:flex;justify-content:center;text-align:center}.site-nav-center .site-nav-logo{margin-right:0}.error-message{text-align:center}.error-code{font-size:12vw;letter-spacing:-5px;line-height:1em;margin:0;opacity:.3}.error-description{color:#738a94;font-size:3rem;font-weight:400;line-height:1.3em;margin:0}@media (max-width:800px){.error-description{font-size:1.8rem;margin:5px 0 0}}.error-link{display:inline-block;margin-top:5px}.error-template .post-feed{padding-top:0}.subscribe-overlay{align-items:center;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);background:rgba(0,25,40,.97);bottom:0;display:flex;justify-content:center;left:0;opacity:0;pointer-events:none;position:fixed;right:0;top:0;transition:opacity .2s ease-in;z-index:9000}.subscribe-overlay:target{opacity:1;pointer-events:auto}.subscribe-overlay-content{color:#fff;margin:0 0 5vw;padding:4vw;position:relative;text-align:center;z-index:9999}.subscribe-overlay-logo{height:30px;left:30px;position:fixed;top:23px}.subscribe-overlay-title{display:inline-block;font-size:6rem;line-height:1.15em;margin:0 0 10px}.subscribe-overlay-description{font-family:Georgia,serif;font-size:3rem;font-weight:300;line-height:1.3em;margin:0 auto 50px;max-width:650px;opacity:.8}.subscribe-overlay form{align-items:center;display:flex;justify-content:center;margin:0 auto;max-width:500px}.subscribe-overlay .form-group{flex-grow:1}.subscribe-overlay .subscribe-email{-webkit-appearance:none;border:none;border-radius:8px;color:#738a94;display:block;font-size:2rem;font-weight:400;letter-spacing:.5px;line-height:1em;padding:14px 20px;transition:border-color .15s linear;-webkit-user-select:text;user-select:text;width:100%}.subscribe-email:focus{border-color:#becdd5;outline:0}.subscribe-overlay button{-webkit-font-smoothing:subpixel-antialiased;background:linear-gradient(#4fb7f0,#29a0e0 60%,#29a0e0 90%,#36a6e2);border-radius:8px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.14);color:#fff;display:inline-block;font-size:1.7rem;font-weight:400;height:52px;line-height:37px;margin:0 0 0 15px;outline:none;padding:0 25px;text-align:center;text-shadow:0 -1px 0 rgba(0,0,0,.1)}.subscribe-overlay button:active,.subscribe-overlay button:focus{background:#209cdf}.subscribe-overlay-close{bottom:0;display:block;left:0;position:absolute;right:0;top:0}.subscribe-overlay-close:before{transform:rotate(45deg)}.subscribe-overlay-close:after,.subscribe-overlay-close:before{background:#fff;content:"";display:block;height:2px;opacity:.8;position:absolute;right:25px;top:40px;width:30px}.subscribe-overlay-close:after{transform:rotate(-45deg)}.subscribe-overlay-close:hover{cursor:default}.site-footer{background:#000;color:#fff;padding-bottom:5px;padding-top:5px;position:relative}.site-footer-content{align-items:center;display:flex;flex-wrap:wrap;font-size:1.3rem;justify-content:space-between}.site-footer-content,.site-footer-content a{color:hsla(0,0%,100%,.7)}.site-footer-content a:hover{color:#fff;text-decoration:none}.site-footer-nav{display:flex}.site-footer-nav a{margin-left:20px;position:relative}.site-footer-nav a:before{background:#fff;border-radius:100%;content:"";display:block;height:2px;left:-11px;position:absolute;top:11px;width:2px}.site-footer-nav a:first-of-type:before{display:none}@media (max-width:650px){.site-footer-content{flex-direction:column}.site-footer-nav a:first-child{margin-left:0}}.paginatation{align-items:baseline;display:flex;justify-content:center;margin-bottom:2rem;text-align:center}.nextLink a,.previousLink a{border:1px solid #639;border-radius:5px;color:#639;cursor:pointer;margin:0 1rem;padding:.5rem 1.5rem;transition:all .3s ease-out}.nextLink a:hover,.previousLink a:hover{background-color:#639;color:#fff;text-decoration:none}.social-logo svg{height:2.5rem;margin-right:2rem;opacity:.8;width:2.5rem}.social-logo:last-child svg{margin-right:0}.blog-content{margin:auto;max-width:800px;padding:2rem .5rem}.bg-white,.blog-content{background:#fff}.social-logo svg:hover{opacity:1}img{border-radius:5px}.blog-post-header{align-items:flex-end;background-position:50% 50%;background-repeat:no-repeat;background-size:cover;display:flex;height:40vh;justify-content:center;width:100%}.date-meta{display:flex;flex-wrap:wrap;justify-content:space-between}.uev{background:#451773;border-radius:5px;color:#fff;font-weight:500;padding:.3rem}.github-link{font-weight:700;text-align:left}.youtube-link{background:#f2f2f2;border:2px solid grey;border-radius:1rem;color:red;font-weight:500;margin-top:3rem;padding:1rem;text-align:center}.youtube-link:hover{color:#ce0000}.youtube-link:hover,a.ytl-hov:hover{text-decoration:none}.gatsby-resp-iframe-wrapper{margin:0 0 1.5em}.text-center{text-align:center}.tag-container{display:flex;flex-wrap:wrap;justify-content:center;list-style-type:none;margin:2rem 1rem}.tag-link{background:rgba(0,0,0,.8);border-radius:5px;color:#fff;cursor:pointer;margin:1rem;padding:.5rem 1.5rem;transition:all .3s ease-out}.tag-link:hover{background-color:#639;color:#fff;text-decoration:none}.tag-page-link{background:rgba(0,0,0,.8);border-radius:5px;color:#fff;cursor:pointer;font-size:2rem;margin:0 1rem 0 0;min-width:300px;padding:.5rem 1.5rem;text-align:center;transition:all .3s ease-out}.tag-page-link:hover{background-color:#639;color:#fff;text-decoration:none}.tag-container .post-card{align-items:center;margin-bottom:2rem;min-height:50px;min-width:200px;padding:2rem;text-align:center}.tag-container a:hover{text-decoration:none}.iron-image-loaded,.iron-image-preload{background-position:50% 50%;background-size:cover;bottom:0;left:0;position:absolute;right:0;top:0}.iron-image-preload{z-index:1}.iron-image-loaded{opacity:0;transition:opacity 1s ease;z-index:2}.iron-image-fade-in{opacity:1}.nextLink span,.previousLink span{border:1px solid grey;border-radius:5px;color:grey;margin:0 1rem;padding:.5rem 1.5rem}.mb-0{margin-bottom:0}p code{background:#dcdcdc;border-radius:3px;padding:0 .3rem}pre[class*=language-]{margin:.5em 0 2em}.cls-1,.cls-2{fill:#fff}.cls-1{fill-rule:evenodd}.comment-author-img{border-radius:50%;height:40px;margin-right:16px;width:40px}.author-thumbnail{border:0;font:inherit;font-size:100%;margin:0;padding:0;vertical-align:baseline}.yt-comment{display:flex;flex-direction:row;margin-bottom:16px}.simple-endpoint{cursor:pointer;display:inline-block;text-decoration:none}.comment-content{display:flex;flex:1 1;flex-basis:0.000000001px;flex-direction:column;min-width:0}.comment-header{margin-bottom:2px}.yt-comment-author{color:#111;font-size:1.4rem;font-weight:500;line-height:1.8rem;margin-bottom:2px;margin-right:8px}.yt-comment-author:hover{text-decoration:none}.yt-comment-date{color:#11111199;font-size:1.2rem}.loaded-replies{display:flex;display:block;flex-direction:column;margin-left:56px}.comment-reply-author-img{border-radius:50%;height:24px;margin-right:16px;width:24px}.yt-comment-box{padding:1rem}.replies-hidden{display:none}.replies-show{display:flex}.reply-toggle{color:#111;cursor:pointer;font-size:1.4rem;font-weight:500;line-height:1.8rem;margin-bottom:16px;margin-left:56px;margin-right:8px}.yt-video-wrapper{height:0;margin:0 0 1.5em;overflow:hidden;padding-bottom:56.25%;position:relative}.yt-video-wrapper iframe{height:100%;left:0;position:absolute;top:0;width:100%}hr{margin:2.5rem 0 1rem}.tcenter{text-align:center}.m5{margin-right:5px}.post-feed li{padding:0}</style><title data-react-helmet="true">Unreal C++ | Health Bar and UI HUD</title><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=b2c6f5cddf526b26c18c190d886812f0" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b2c6f5cddf526b26c18c190d886812f0"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b2c6f5cddf526b26c18c190d886812f0"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b2c6f5cddf526b26c18c190d886812f0"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b2c6f5cddf526b26c18c190d886812f0"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b2c6f5cddf526b26c18c190d886812f0"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b2c6f5cddf526b26c18c190d886812f0"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b2c6f5cddf526b26c18c190d886812f0"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b2c6f5cddf526b26c18c190d886812f0"/><link rel="alternate" type="application/rss+xml" title="Unreal C++ RSS Feed" href="/rss.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><header class="site-header outer"><div class="inner"><nav class="site-nav"><div class="site-nav-left"><a class="site-nav-logo" href="/">Unreal C++</a><ul class="nav" role="menu"><li role="menuitem"><a href="/">Home</a></li><li role="menuitem"><a href="/tags/">Tags</a></li></ul></div><div class="site-nav-right"><a class="social-logo" href="https://www.youtube.com/c/HarrisonMcGuire"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2499.99 1755.79"><defs></defs><title>youtube-logo</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M1035.38,1753.62c-476.11-8.77-638.72-16.65-738.68-37.25-67.62-13.68-126.39-44.06-169.48-88.12-33.3-33.35-59.79-84.23-80.33-154.83-17.63-58.81-24.49-107.74-34.28-227.27-15-269.76-18.55-490.31,0-736.73C27.92,373.33,35.34,211.78,137,117.53,185,73.42,240.86,45,303.57,33.3,401.53,14.7,818.87,0,1250.92,0c431.08,0,849.35,14.7,947.4,33.3,78.34,14.71,151.81,58.77,194.95,115.59,92.76,145.92,94.39,327.36,103.8,469.29,3.9,67.63,3.9,451.63,0,519.25-14.65,224.3-26.44,303.66-59.74,386-20.59,51.94-38.17,79.36-68.6,109.74a328.55,328.55,0,0,1-174.39,89.14c-412,31-761.88,37.71-1159,31.36Zm630.94-901.3c-229.22-122.5-448.7-236.09-673-353.66v703.43c236.08-128.34,485-245.92,674-350.74l-1,1Z"></path></g></g></svg></a><a class="social-logo" href="https://github.com/Harrison1/unrealcpp"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120.78 117.79"><defs></defs><title>Github Logo</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M60.39,0A60.39,60.39,0,0,0,41.3,117.69c3,.56,4.12-1.31,4.12-2.91,0-1.44-.05-6.19-.08-11.24C28.54,107.19,25,96.42,25,96.42c-2.75-7-6.71-8.84-6.71-8.84-5.48-3.75.41-3.67.41-3.67,6.07.43,9.26,6.22,9.26,6.22,5.39,9.23,14.13,6.57,17.57,5,.55-3.9,2.11-6.56,3.84-8.07C36,85.55,21.85,80.37,21.85,57.23A23.35,23.35,0,0,1,28.08,41c-.63-1.52-2.7-7.66.58-16,0,0,5.07-1.62,16.61,6.19a57.36,57.36,0,0,1,30.25,0C87,23.42,92.11,25,92.11,25c3.28,8.32,1.22,14.46.59,16a23.34,23.34,0,0,1,6.21,16.21c0,23.2-14.12,28.3-27.57,29.8,2.16,1.87,4.09,5.55,4.09,11.18,0,8.08-.06,14.59-.06,16.57,0,1.61,1.08,3.49,4.14,2.9A60.39,60.39,0,0,0,60.39,0Z"></path><path class="cls-2" d="M22.87,86.7c-.13.3-.6.39-1,.19s-.69-.61-.55-.91.61-.39,1-.19.69.61.54.91Z"></path><path class="cls-2" d="M25.32,89.43c-.29.27-.85.14-1.24-.28a.92.92,0,0,1-.17-1.25c.3-.27.84-.14,1.24.28s.47,1,.17,1.25Z"></path><path class="cls-2" d="M27.7,92.91c-.37.26-1,0-1.35-.52s-.37-1.18,0-1.44,1,0,1.35.51.37,1.19,0,1.45Z"></path><path class="cls-2" d="M31,96.27A1.13,1.13,0,0,1,29.41,96c-.53-.49-.68-1.18-.34-1.54s1-.27,1.56.23.68,1.18.33,1.54Z"></path><path class="cls-2" d="M35.46,98.22c-.15.47-.82.69-1.51.49s-1.13-.76-1-1.24.82-.7,1.51-.49,1.13.76,1,1.24Z"></path><path class="cls-2" d="M40.4,98.58c0,.5-.56.91-1.28.92s-1.3-.38-1.31-.87.56-.92,1.29-.93,1.3.39,1.3.88Z"></path><path class="cls-2" d="M45,97.8c.09.49-.41,1-1.12,1.12s-1.35-.17-1.44-.66.42-1,1.12-1.12,1.35.17,1.44.66Z"></path></g></g></svg></a></div></nav></div></header><div class="blog-post-header" style="background-image:url(https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui_ypjozf.jpg)"><a class="tag-link" href="/tags/advanced/">advanced</a></div><main id="site-main" class="site-main outer bg-white" role="main"><div class="inner"><article class="post-full"><div class="blog-content"><h1 class="post-full-title">Health Bar and UI HUD</h1><div class="date-meta"><p>May 16, 2018</p><p>UE4 Version: <span class="uev">4.19.2</span></p></div><div class="yt-video-wrapper"><iframe width="560" height="315" src="https://www.youtube.com/embed/Nt4W1B8cKy8" frameBorder="0" allowfullscreen=""></iframe></div><div><p><strong>Github Link: <a href="https://github.com/Harrison1/unrealcpp/tree/master/HealthBar">https://github.com/Harrison1/unrealcpp/tree/master/HealthBar</a></strong></p>
<p><em>For this tutorial we are using the standard first person C++ template with the starter content.</em></p>
<p>In this Unreal Engine 4 C++ tutorial we'll learn how to create a health bar on the user's Heads Up Display while applying and receiving damage using the <code>ReceivePointDamage</code> and the <code>ApplyPointDamage</code> functions. We will create a fire object that applies damage on overlap and when the user receives damage the health bar will respond accordingly. We will also make a magic bar and bind it to the player's <code>OnFire</code> method. We'll also create <strong>MedKits</strong> for the player and a magic meter that automatically refills the magic bar after 5 seconds. Let's begin.</p>
<p>Before going any further, since we'll be using <strong>UMGs</strong> and <strong>UserWidgets</strong> in our game, we need to update our build file. In the <code>PublicDependencyModuleNames</code> we need to add <code>UMG</code>, <code>Slate</code>, and <code>SlateCore</code>. Below is my final build file.</p>
<h3>UnrealBuild.cs</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">using</span> UnrealBuildTool<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UnrealCPP</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">ModuleRules</span></span>
<span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token function">UnrealCPP</span><span class="token punctuation">(</span>ReadOnlyTargetRules Target<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>Target<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		PCHUsage <span class="token operator">=</span> PCHUsageMode<span class="token punctuation">.</span>UseExplicitOrSharedPCHs<span class="token punctuation">;</span>

		PublicDependencyModuleNames<span class="token punctuation">.</span><span class="token function">AddRange</span><span class="token punctuation">(</span><span class="token keyword">new</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">"Core"</span><span class="token punctuation">,</span> <span class="token string">"CoreUObject"</span><span class="token punctuation">,</span> <span class="token string">"Engine"</span><span class="token punctuation">,</span> <span class="token string">"InputCore"</span><span class="token punctuation">,</span> <span class="token string">"HeadMountedDisplay"</span><span class="token punctuation">,</span> <span class="token string">"UMG"</span><span class="token punctuation">,</span> <span class="token string">"Slate"</span><span class="token punctuation">,</span> <span class="token string">"SlateCore"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next, we'll work on updating our <code>Character</code> file. Let's go ahead and jump right into the <code>Character's</code> header file. My file is titled <code>UnrealCPPCharacter.h</code>.</p>
<p>The first thing we'll do is include the <code>TimelineComponent.h</code> and the <code>BoxComponent.h</code> at the top of the file. We'll be referenceing these elements throughout the tutorial.</p>
<h4>include files</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/TimelineComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/BoxComponent.h"</span></span></code></pre></div>
<p>Next we'll override the <code>Tick</code> function, we'll put it right below where we override the <code>BeginPlay</code> function inside the <code>header</code> file.</p>
<h4>Override BeginPlay and Tick</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">protected</span><span class="token operator">:</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Tick</span><span class="token punctuation">(</span><span class="token keyword">float</span> DeltaTime<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span></code></pre></div>
<p>Next we'll define all of our variables and functions. There's a lot of them, so I won't cover all of them in depth here, but we will be using them all throughout our program. The variables we are defining are going to be used to define <strong>Health</strong> and <strong>Magic</strong> numbers and percentages that help us bind the variables to the UI.</p>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">  <span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> FullHealth<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> Health<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> HealthPercentage<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> PreviousHealth<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> FullMagic<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> Magic<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> MagicPercentage<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> PreviousMagic<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> MagicValue<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> redFlash<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	UCurveFloat <span class="token operator">*</span>MagicCurve<span class="token punctuation">;</span>

	FTimeline MyTimeline<span class="token punctuation">;</span>
	<span class="token keyword">float</span> CurveFloatValue<span class="token punctuation">;</span>
	<span class="token keyword">float</span> TimelineValue<span class="token punctuation">;</span>
	FTimerHandle MemberTimerHandle<span class="token punctuation">;</span>

	<span class="token keyword">bool</span> bCanUseMagic<span class="token punctuation">;</span>

	<span class="token comment">/** Get Health */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> <span class="token function">GetHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Get Magic */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> <span class="token function">GetMagic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/** Update Health */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintCallable<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token keyword">float</span> HealthChange<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/** Update Magic */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintCallable<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">UpdateMagic</span><span class="token punctuation">(</span><span class="token keyword">float</span> MagicChange<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Get Health Text */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	FText <span class="token function">GetHealthIntText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Get Magic Text */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	FText <span class="token function">GetMagicIntText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Damage Timer */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">DamageTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Set Damage State */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">SetDamageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Set Magic Value */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">SetMagicValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Set Damage State */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">SetMagicState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Set Damage State */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">SetMagicChange</span><span class="token punctuation">(</span><span class="token keyword">float</span> MagicChange<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Play Flash */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">bool</span> <span class="token function">PlayFlash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UMaterialInterface</span><span class="token operator">*</span> GunDefaultMaterial<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UMaterialInterface</span><span class="token operator">*</span> GunOverheatMaterial<span class="token punctuation">;</span>

	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">ReceivePointDamage</span><span class="token punctuation">(</span><span class="token keyword">float</span> Damage<span class="token punctuation">,</span> <span class="token keyword">const</span> UDamageType <span class="token operator">*</span> DamageType<span class="token punctuation">,</span> FVector HitLocation<span class="token punctuation">,</span> FVector HitNormal<span class="token punctuation">,</span> UPrimitiveComponent <span class="token operator">*</span> HitComponent<span class="token punctuation">,</span> FName BoneName<span class="token punctuation">,</span> FVector ShotFromDirection<span class="token punctuation">,</span> AController <span class="token operator">*</span> InstigatedBy<span class="token punctuation">,</span> AActor <span class="token operator">*</span> DamageCauser<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult <span class="token operator">&amp;</span> HitInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div>
<p>Next, we'll move in the <strong>Character's</strong> <code>.cpp</code> file.</p>
<p>First at the top of the file include <code>KistmetMathLibrary.h</code> and <code>TimeManager.h</code></p>
<h4>include files in the character's .cpp file</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPCharacter.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPProjectile.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Animation/AnimInstance.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Camera/CameraComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/CapsuleComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/InputComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/InputSettings.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"HeadMountedDisplayFunctionLibrary.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Kismet/GameplayStatics.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"MotionControllerComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"XRMotionControllerBase.h"</span> <span class="token comment">// for FXRMotionControllerBase::RightHandSourceId</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Kismet/KismetMathLibrary.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"TimerManager.h"</span></span></code></pre></div>
<p>Next, in the <code>BeginPlay</code> function we will set our values for character and establish our timeline. A lot of this can be done in the <code>Constructor</code> function, but for this tutorial it will be easier to test the on the player when it is done in the <code>BeginPlay</code> function. We'll establish our character's health and magic attributes to track how much of each the character has and what percentage that represents. The HUD's health bar will always represent a percentage of the players current health so we need to always track the percentage of the player's current health to what the full health can potentially be. The same can be said for magic. Also, in the <code>BeginPlay</code> function we will establish our functions and callbacks for our <code>FTimeline</code> by using <code>FOnTimelineFloat</code> and <code>FOnTimelineEventStatic</code>.</p>
<h4>BeginPlay function</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Call the base class  </span>
	Super<span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>

	FullHealth <span class="token operator">=</span> <span class="token number">1000.0f</span><span class="token punctuation">;</span>
	Health <span class="token operator">=</span> FullHealth<span class="token punctuation">;</span>
	HealthPercentage <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
	PreviousHealth <span class="token operator">=</span> HealthPercentage<span class="token punctuation">;</span>
	bCanBeDamaged <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

	FullMagic <span class="token operator">=</span> <span class="token number">100.0f</span><span class="token punctuation">;</span>
	Magic <span class="token operator">=</span> FullMagic<span class="token punctuation">;</span>
	MagicPercentage <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
	PreviousMagic <span class="token operator">=</span> MagicPercentage<span class="token punctuation">;</span>
	MagicValue <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
	bCanUseMagic <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>MagicCurve<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        FOnTimelineFloat TimelineCallback<span class="token punctuation">;</span>
        FOnTimelineEventStatic TimelineFinishedCallback<span class="token punctuation">;</span>

        TimelineCallback<span class="token punctuation">.</span><span class="token function">BindUFunction</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">FName</span><span class="token punctuation">(</span><span class="token string">"SetMagicValue"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        TimelineFinishedCallback<span class="token punctuation">.</span><span class="token function">BindUFunction</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> FName<span class="token punctuation">{</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"SetMagicState"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        MyTimeline<span class="token punctuation">.</span><span class="token function">AddInterpFloat</span><span class="token punctuation">(</span>MagicCurve<span class="token punctuation">,</span> TimelineCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
        MyTimeline<span class="token punctuation">.</span><span class="token function">SetTimelineFinishedFunc</span><span class="token punctuation">(</span>TimelineFinishedCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token comment">//Attach gun mesh component to Skeleton, doing it here because the skeleton is not yet created in the constructor</span>
	FP_Gun<span class="token operator">-></span><span class="token function">AttachToComponent</span><span class="token punctuation">(</span>Mesh1P<span class="token punctuation">,</span> <span class="token function">FAttachmentTransformRules</span><span class="token punctuation">(</span>EAttachmentRule<span class="token double-colon punctuation">::</span>SnapToTarget<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"GripPoint"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Show or hide the two versions of the gun based on whether or not we're using motion controllers.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>bUsingMotionControllers<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		VR_Gun<span class="token operator">-></span><span class="token function">SetHiddenInGame</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Mesh1P<span class="token operator">-></span><span class="token function">SetHiddenInGame</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		VR_Gun<span class="token operator">-></span><span class="token function">SetHiddenInGame</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Mesh1P<span class="token operator">-></span><span class="token function">SetHiddenInGame</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>In the <code>Tick</code> function we need to connect the <code>MyTimeline</code> to each frame represented by <code>DeltaTime</code>.</p>
<h4>Tick function</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">Tick</span><span class="token punctuation">(</span><span class="token keyword">float</span> DeltaTime<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">Tick</span><span class="token punctuation">(</span>DeltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

	MyTimeline<span class="token punctuation">.</span><span class="token function">TickTimeline</span><span class="token punctuation">(</span>DeltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Since I want to add in a <strong>Magic</strong> function to the game, I am going to use the <code>OnFire</code> method already provided to say that the player can only shoot once every two seconds. I want this to kind of be like the gun overheating preventing another shot before the gun cools down. So we'll add extra conditions to the <code>if</code> statement which is wrapping the function preventing the player from firing when <code>bCanUseMagic</code> is <code>false</code> and when <code>Magic</code> is at <strong>0</strong>. When the condition passes as <code>true</code> the player can then successfully fire (or use their magic, in our test example). When the gun is fired we <code>Stop()</code> the timeline, <code>Clear</code> the automatic timer that will replenish the magic meter after 5 seconds, run <code>SetMagicChange</code> (we'll create the function later), and then restart our replenish timer. Below is my final <code>OnFire</code> function.</p>
<h4>OnFire function</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">OnFire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// try and fire a projectile</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ProjectileClass <span class="token operator">!=</span> <span class="token constant">NULL</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">IsNearlyZero</span><span class="token punctuation">(</span>Magic<span class="token punctuation">,</span> <span class="token number">0.001f</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> bCanUseMagic<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		UWorld<span class="token operator">*</span> <span class="token keyword">const</span> World <span class="token operator">=</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>World <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>bUsingMotionControllers<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
				<span class="token keyword">const</span> FRotator SpawnRotation <span class="token operator">=</span> VR_MuzzleLocation<span class="token operator">-></span><span class="token function">GetComponentRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">const</span> FVector SpawnLocation <span class="token operator">=</span> VR_MuzzleLocation<span class="token operator">-></span><span class="token function">GetComponentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				World<span class="token operator">-></span><span class="token generic-function"><span class="token function">SpawnActor</span><span class="token generic class-name"><span class="token operator">&lt;</span>AUnrealCPPProjectile<span class="token operator">></span></span></span><span class="token punctuation">(</span>ProjectileClass<span class="token punctuation">,</span> SpawnLocation<span class="token punctuation">,</span> SpawnRotation<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{</span>
				<span class="token keyword">const</span> FRotator SpawnRotation <span class="token operator">=</span> <span class="token function">GetControlRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// MuzzleOffset is in camera space, so transform it to world space before offsetting from the character location to find the final muzzle position</span>
				<span class="token keyword">const</span> FVector SpawnLocation <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>FP_MuzzleLocation <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">?</span> FP_MuzzleLocation<span class="token operator">-></span><span class="token function">GetComponentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> SpawnRotation<span class="token punctuation">.</span><span class="token function">RotateVector</span><span class="token punctuation">(</span>GunOffset<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">//Set Spawn Collision Handling Override</span>
				FActorSpawnParameters ActorSpawnParams<span class="token punctuation">;</span>
				ActorSpawnParams<span class="token punctuation">.</span>SpawnCollisionHandlingOverride <span class="token operator">=</span> ESpawnActorCollisionHandlingMethod<span class="token double-colon punctuation">::</span>AdjustIfPossibleButDontSpawnIfColliding<span class="token punctuation">;</span>

				<span class="token comment">// spawn the projectile at the muzzle</span>
				World<span class="token operator">-></span><span class="token generic-function"><span class="token function">SpawnActor</span><span class="token generic class-name"><span class="token operator">&lt;</span>AUnrealCPPProjectile<span class="token operator">></span></span></span><span class="token punctuation">(</span>ProjectileClass<span class="token punctuation">,</span> SpawnLocation<span class="token punctuation">,</span> SpawnRotation<span class="token punctuation">,</span> ActorSpawnParams<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// try and play the sound if specified</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>FireSound <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
				<span class="token punctuation">{</span>
					<span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">PlaySoundAtLocation</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> FireSound<span class="token punctuation">,</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// try and play a firing animation if specified</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>FireAnimation <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
				<span class="token punctuation">{</span>
					<span class="token comment">// Get the animation object for the arms mesh</span>
					UAnimInstance<span class="token operator">*</span> AnimInstance <span class="token operator">=</span> Mesh1P<span class="token operator">-></span><span class="token function">GetAnimInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>AnimInstance <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
					<span class="token punctuation">{</span>
						AnimInstance<span class="token operator">-></span><span class="token function">Montage_Play</span><span class="token punctuation">(</span>FireAnimation<span class="token punctuation">,</span> <span class="token number">1.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				MyTimeline<span class="token punctuation">.</span><span class="token function">Stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">GetWorldTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ClearTimer</span><span class="token punctuation">(</span>MagicTimerHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">SetMagicChange</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token function">GetWorldTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTimer</span><span class="token punctuation">(</span>MagicTimerHandle<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>UpdateMagic<span class="token punctuation">,</span> <span class="token number">5.0f</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next, we'll create two functions that will simply return the <code>HealthPercetange</code> and <code>MagicPercentage</code> respectively. This functions will allow the UI to bind themselves to these numbers thus always watching and reacting to when these numbers change.</p>
<h4>return HealthPercentage and MagicPercentage</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">float</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">GetHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> HealthPercentage<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">float</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">GetMagic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> MagicPercentage<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The next two functions are necessary for the same reasons as the previous two functions, but instead of returning a <code>float</code>, we'll return <code>FText</code> so the UI can display the number as text. I'm rounding the numbers then creating strings to make the text more readable.</p>
<h4>return FText</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp">FText <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">GetHealthIntText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	int32 HP <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">RoundHalfFromZero</span><span class="token punctuation">(</span>HealthPercentage <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString HPS <span class="token operator">=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">FromInt</span><span class="token punctuation">(</span>HP<span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString HealthHUD <span class="token operator">=</span> HPS <span class="token operator">+</span> <span class="token function">FString</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"%"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	FText HPText <span class="token operator">=</span> <span class="token class-name">FText</span><span class="token double-colon punctuation">::</span><span class="token function">FromString</span><span class="token punctuation">(</span>HealthHUD<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> HPText<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

FText <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">GetMagicIntText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	int32 MP <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">RoundHalfFromZero</span><span class="token punctuation">(</span>MagicPercentage<span class="token operator">*</span>FullMagic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString MPS <span class="token operator">=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">FromInt</span><span class="token punctuation">(</span>MP<span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString FullMPS <span class="token operator">=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">FromInt</span><span class="token punctuation">(</span>FullMagic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString MagicHUD <span class="token operator">=</span> MPS <span class="token operator">+</span> <span class="token function">FString</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> FullMPS<span class="token punctuation">;</span>
	FText MPText <span class="token operator">=</span> <span class="token class-name">FText</span><span class="token double-colon punctuation">::</span><span class="token function">FromString</span><span class="token punctuation">(</span>MagicHUD<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> MPText<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next we'll create one tow functions that toggle the player's invincibility state. In our game, when a player is receives damage they have 2 seconds of invincibility. Each actor by default has the <code>bCanBeDamaged</code> bool attached to them. When <code>bCanBeDamaged</code> is true allows the <code>ReceivePointDamage</code> function to run, when it's false, the <code>ReceivePointDamage</code> will not trigger.</p>
<h4>toggle player's invincibility state</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetDamageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	bCanBeDamaged <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">DamageTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">GetWorldTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTimer</span><span class="token punctuation">(</span>MemberTimerHandle<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>SetDamageState<span class="token punctuation">,</span> <span class="token number">2.0f</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The next two functions will deal with the Magic's timeline curve. The <code>SetMagicValue</code> function will run in conjunction with the timeline changing the <code>Magic</code> and <code>MagicPercentage</code> values as the timeline progresses. The <code>SetMagicState</code> function is called after the timeline finishes, this will revert the desired values and gun material back to their respective default values.</p>
<h4>magic functions</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetMagicValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	TimelineValue <span class="token operator">=</span> MyTimeline<span class="token punctuation">.</span><span class="token function">GetPlaybackPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CurveFloatValue <span class="token operator">=</span> PreviousMagic <span class="token operator">+</span> MagicValue<span class="token operator">*</span>MagicCurve<span class="token operator">-></span><span class="token function">GetFloatValue</span><span class="token punctuation">(</span>TimelineValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Magic <span class="token operator">=</span> CurveFloatValue<span class="token operator">*</span>FullHealth<span class="token punctuation">;</span>
	Magic <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">Clamp</span><span class="token punctuation">(</span>Magic<span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> FullMagic<span class="token punctuation">)</span><span class="token punctuation">;</span>
    MagicPercentage <span class="token operator">=</span> CurveFloatValue<span class="token punctuation">;</span>
	MagicPercentage <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">Clamp</span><span class="token punctuation">(</span>MagicPercentage<span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetMagicState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	bCanUseMagic <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	MagicValue <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>GunDefaultMaterial<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		FP_Gun<span class="token operator">-></span><span class="token function">SetMaterial</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> GunDefaultMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div>
<p>The <code>PlayFlash</code> function simply returns a bool that lets our UI know if it should play the red flash animation (we'll set up the UI and animation later in the tutorial).</p>
<h4>PlayFlash</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>redFlash<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		redFlash <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The next two functions will affect the player's health. The <code>ReceivePointDamage</code> function will run each time the player interacts with an element that calls the <code>ApplyPointDamage</code> function. In our example we'll create a fire actor later on that will run <code>ApplyPointDamage</code>. In our <code>ReceivePointDamage</code> function we are simply toggling our <code>bCanBeDamaged</code> bool to trigger our invincibility, toggling our <code>redFlash</code> bool to trigger the animation, running the <code>UpdateHealth</code> function with the <code>Damage</code> value passed through as a parameter, and then calling <code>DamageTimer</code> to revert the <code>bCanBeDamaged</code> bool back to <code>true</code>. The <code>UpdateHealth</code> function immediately changes and clamps the <code>Health</code> value then it sets <code>PreviousHealth</code> and <code>HealthPercentage</code>.</p>
<h4>ReceiveDamage and UpdateHealth</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">ReceivePointDamage</span><span class="token punctuation">(</span><span class="token keyword">float</span> Damage<span class="token punctuation">,</span> <span class="token keyword">const</span> UDamageType <span class="token operator">*</span> DamageType<span class="token punctuation">,</span> FVector HitLocation<span class="token punctuation">,</span> FVector HitNormal<span class="token punctuation">,</span> UPrimitiveComponent <span class="token operator">*</span> HitComponent<span class="token punctuation">,</span> FName BoneName<span class="token punctuation">,</span> FVector ShotFromDirection<span class="token punctuation">,</span> AController <span class="token operator">*</span> InstigatedBy<span class="token punctuation">,</span> AActor <span class="token operator">*</span> DamageCauser<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult <span class="token operator">&amp;</span> HitInfo<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	bCanBeDamaged <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	redFlash <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token operator">-</span>Damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">DamageTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token keyword">float</span> HealthChange<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Health <span class="token operator">+=</span> HealthChange<span class="token punctuation">;</span>
	Health <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">Clamp</span><span class="token punctuation">(</span>Health<span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> FullHealth<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PreviousHealth <span class="token operator">=</span> HealthPercentage<span class="token punctuation">;</span>
	HealthPercentage <span class="token operator">=</span> Health<span class="token operator">/</span>FullHealth<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>The final two functions are magic related and are similar to the health functions. <code>UpdateMagic</code> sets the <code>Magic</code> values and starts the timeline to get the player's magic meter back to 100%. <code>UpdateMagic</code> will run after 5 seconds of no magic firing to fill up the player's magic bar. <code>SetMagicChange</code> will toggle <code>bCanUseMagic</code> bool, set <code>PreviousMagic</code>, set <code>MagicValue</code>, change the gun's material to indicate overheating, the call <code>PlayFromStart</code> on the magic float timeline curve.</p>
<h4>UpdateMagic and SetMagicChange</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">UpdateMagic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	PreviousMagic <span class="token operator">=</span> MagicPercentage<span class="token punctuation">;</span>
	MagicPercentage <span class="token operator">=</span> Magic<span class="token operator">/</span>FullMagic<span class="token punctuation">;</span>
	MagicValue <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
	MyTimeline<span class="token punctuation">.</span><span class="token function">PlayFromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetMagicChange</span><span class="token punctuation">(</span><span class="token keyword">float</span> MagicChange<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	bCanUseMagic <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	PreviousMagic <span class="token operator">=</span> MagicPercentage<span class="token punctuation">;</span>
	MagicValue <span class="token operator">=</span> <span class="token punctuation">(</span>MagicChange<span class="token operator">/</span>FullMagic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>GunOverheatMaterial<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		FP_Gun<span class="token operator">-></span><span class="token function">SetMaterial</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> GunOverheatMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	MyTimeline<span class="token punctuation">.</span><span class="token function">PlayFromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We are done with the character's <code>.cpp</code> file. Let's quickly move into the <code>GameMode</code> files.</p>
<p>In the <code>GameMode</code> header file we'll create an <code>enum</code> class and create player state functions to track player state. We will override the <code>Tick</code> function because we need to always check if the player is dead or not. Below is the final <code>GameMode</code> <code>.cpp</code> file.</p>
<h4>UnrealCPPGameMode.h</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/GameModeBase.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPCharacter.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPGameMode.generated.h"</span></span>

<span class="token comment">//enum to store the current state of gameplay</span>
<span class="token function">UENUM</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">EGamePlayState</span>
<span class="token punctuation">{</span>
	EPlaying<span class="token punctuation">,</span>
	EGameOver<span class="token punctuation">,</span>
	EUnknown
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">UCLASS</span><span class="token punctuation">(</span>minimalapi<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">AUnrealCPPGameMode</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">AGameModeBase</span></span>
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">AUnrealCPPGameMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Tick</span><span class="token punctuation">(</span><span class="token keyword">float</span> DeltaTime<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>

	AUnrealCPPCharacter<span class="token operator">*</span> MyCharacter<span class="token punctuation">;</span>
	
	<span class="token comment">/** Returns the current playing state */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	EGamePlayState <span class="token function">GetCurrentState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment">/** Sets a new playing state */</span>
	<span class="token keyword">void</span> <span class="token function">SetCurrentState</span><span class="token punctuation">(</span>EGamePlayState NewState<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span> 
	<span class="token comment">/**Keeps track of the current playing state */</span>
	EGamePlayState CurrentState<span class="token punctuation">;</span>

	<span class="token comment">/**Handle any function calls that rely upon changing the playing state of our game */</span>
	<span class="token keyword">void</span> <span class="token function">HandleNewState</span><span class="token punctuation">(</span>EGamePlayState NewState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Next, in the <code>GameMode</code> <code>.cpp</code> file we first find the player in the <code>BeginPlay</code> function then in the <code>Tick</code> function we always check if the player's health is above 0. If the player's health is below 0 we will simply restart the level.</p>
<h4>UnrealCPPGameMode.cpp</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPGameMode.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPHUD.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Kismet/GameplayStatics.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Engine/World.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UObject/ConstructorHelpers.h"</span></span>

<span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">AUnrealCPPGameMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token operator">:</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	PrimaryActorTick<span class="token punctuation">.</span>bCanEverTick <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

	<span class="token comment">// set default pawn class to our Blueprinted character</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token double-colon punctuation">::</span>FClassFinder<span class="token operator">&lt;</span>APawn<span class="token operator">></span> <span class="token function">PlayerPawnClassFinder</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"/Game/FirstPersonCPP/Blueprints/FirstPersonCharacter"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	DefaultPawnClass <span class="token operator">=</span> PlayerPawnClassFinder<span class="token punctuation">.</span>Class<span class="token punctuation">;</span>

	<span class="token comment">// use our custom HUD class</span>
	HUDClass <span class="token operator">=</span> <span class="token class-name">AUnrealCPPHUD</span><span class="token double-colon punctuation">::</span><span class="token function">StaticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">SetCurrentState</span><span class="token punctuation">(</span>EGamePlayState<span class="token double-colon punctuation">::</span>EPlaying<span class="token punctuation">)</span><span class="token punctuation">;</span>

	MyCharacter <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>AUnrealCPPCharacter<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">GetPlayerPawn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">Tick</span><span class="token punctuation">(</span><span class="token keyword">float</span> DeltaTime<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">Tick</span><span class="token punctuation">(</span>DeltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetMapName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>MyCharacter<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">IsNearlyZero</span><span class="token punctuation">(</span>MyCharacter<span class="token operator">-></span><span class="token function">GetHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.001f</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token function">SetCurrentState</span><span class="token punctuation">(</span>EGamePlayState<span class="token double-colon punctuation">::</span>EGameOver<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

EGamePlayState <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">GetCurrentState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> CurrentState<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">SetCurrentState</span><span class="token punctuation">(</span>EGamePlayState NewState<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	CurrentState <span class="token operator">=</span> NewState<span class="token punctuation">;</span>
	<span class="token function">HandleNewState</span><span class="token punctuation">(</span>CurrentState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">HandleNewState</span><span class="token punctuation">(</span>EGamePlayState NewState<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">switch</span> <span class="token punctuation">(</span>NewState<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">case</span> EGamePlayState<span class="token double-colon punctuation">::</span>EPlaying<span class="token operator">:</span>
		<span class="token punctuation">{</span>
			<span class="token comment">// do nothing</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token comment">// Unknown/default state</span>
		<span class="token keyword">case</span> EGamePlayState<span class="token double-colon punctuation">::</span>EGameOver<span class="token operator">:</span>
		<span class="token punctuation">{</span>
			<span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">OpenLevel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">FName</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token comment">// Unknown/default state</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
		<span class="token keyword">case</span> EGamePlayState<span class="token double-colon punctuation">::</span>EUnknown<span class="token operator">:</span>
		<span class="token punctuation">{</span>
			<span class="token comment">// do nothing</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>We're done with the <code>GameMode</code> files.</p>
<p>Next, we'll create our <code>CampFire</code> actor that will actually apply damage to the player. Create a new <code>C++</code> actor class and call it <strong>CampFire</strong>. In <code>CampFire.h</code> we will add our properties and functions that we will be using throughout the <code>.cpp</code>
file. Some things in the <code>.h</code> file include the overlap functions, a particle component that will be set to our fire particle later on in the tutorial, properties necessary for the <code>ApplyPointDamage</code> function. Below is the final <code>CampFire.h</code> file.</p>
<h4>CampFile.h</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/Actor.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/BoxComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Particles/ParticleSystemComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CampFire.generated.h"</span></span>

<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">UNREALCPP_API</span> ACampFire <span class="token operator">:</span> <span class="token keyword">public</span> AActor
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
<span class="token keyword">public</span><span class="token operator">:</span>	
	<span class="token comment">// Sets default values for this actor's properties</span>
	<span class="token function">ACampFire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>	

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	UParticleSystemComponent<span class="token operator">*</span> Fire<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	UBoxComponent<span class="token operator">*</span> MyBoxComponent<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	TSubclassOf<span class="token operator">&lt;</span>UDamageType<span class="token operator">></span> FireDamageType<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	AActor<span class="token operator">*</span> MyCharacter<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	FHitResult MyHit<span class="token punctuation">;</span>

	<span class="token keyword">bool</span> bCanApplyDamage<span class="token punctuation">;</span>
	FTimerHandle FireTimerHandle<span class="token punctuation">;</span>

	<span class="token comment">// declare overlap begin function</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">OnOverlapBegin</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">AActor</span><span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> bFromSweep<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult<span class="token operator">&amp;</span> SweepResult<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// declare overlap end function</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">OnOverlapEnd</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">AActor</span><span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">ApplyFireDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Next, we'll move into the <code>CampFire.cpp</code> file. Include both <code>Kismet/GameplayStatics.h</code> and <code>TimerManager.h</code>. In <code>constructor</code> function we'll setup our <code>BoxComponent</code>, <code>ParticleComponent</code>, and connect the overlap functions to the <code>BoxComponent</code>. Next, we'll create the <code>OnOverlapBegin</code> function, if the conditions pass as <code>true</code>, we'll set the necessary parameters to and then trigger our the fire timer to run and loop the <code>ApplyFireDamage</code> function after <strong>2.2s</strong>. The reason why the timer is set to 2.2 seconds is because our player has invincibility that lasts 2 seconds so we want the <code>ApplyFireDamage</code> function to run right after the invincibility is turned off, so the extra 0.2 seconds is a buffer to prevent conflicts. <code>OnOverlapEnd</code> is where we clear the timer and set <code>bCanApplyDamage</code> indicating the fire cannot apply damage to the player. The <code>ApplyFireDamage</code> function first checks if <code>bCanApplyDamage</code> and then runs <code>ApplyPointDamage</code> with <code>MyCharcter</code> as the actor to apply damage and the fire will deal <strong>200.0f</strong> points of damage. <code>ApplyPointDamage</code> is a function inherited from <strong>GameplayStatics</strong>. Below is the final <code>CampFire.cpp</code> file.</p>
<h4>CampFire.cpp</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CampFire.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Kismet/GameplayStatics.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"TimerManager.h"</span></span>

<span class="token comment">// Sets default values</span>
<span class="token class-name">ACampFire</span><span class="token double-colon punctuation">::</span><span class="token function">ACampFire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	MyBoxComponent <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>UBoxComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"My Box Component"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    MyBoxComponent<span class="token operator">-></span><span class="token function">InitBoxExtent</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">50.0f</span><span class="token punctuation">,</span><span class="token number">50.0f</span><span class="token punctuation">,</span><span class="token number">50.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    RootComponent <span class="token operator">=</span> MyBoxComponent<span class="token punctuation">;</span>

    Fire <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>UParticleSystemComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"My Fire"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Fire<span class="token operator">-></span><span class="token function">SetRelativeLocation</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Fire<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

    MyBoxComponent<span class="token operator">-></span>OnComponentBeginOverlap<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACampFire<span class="token double-colon punctuation">::</span>OnOverlapBegin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    MyBoxComponent<span class="token operator">-></span>OnComponentEndOverlap<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACampFire<span class="token double-colon punctuation">::</span>OnOverlapEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

    bCanApplyDamage <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">ACampFire</span><span class="token double-colon punctuation">::</span><span class="token function">OnOverlapBegin</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">AActor</span><span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> bFromSweep<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult<span class="token operator">&amp;</span> SweepResult<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">!=</span> <span class="token keyword">nullptr</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span> OtherComp <span class="token operator">!=</span> <span class="token keyword">nullptr</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        bCanApplyDamage <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        MyCharacter <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>AActor<span class="token operator">></span></span></span><span class="token punctuation">(</span>OtherActor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        MyHit <span class="token operator">=</span> SweepResult<span class="token punctuation">;</span>
        <span class="token function">GetWorldTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTimer</span><span class="token punctuation">(</span>FireTimerHandle<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACampFire<span class="token double-colon punctuation">::</span>ApplyFireDamage<span class="token punctuation">,</span> <span class="token number">2.2f</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">ACampFire</span><span class="token double-colon punctuation">::</span><span class="token function">OnOverlapEnd</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">AActor</span><span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    bCanApplyDamage <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">GetWorldTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ClearTimer</span><span class="token punctuation">(</span>FireTimerHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">ACampFire</span><span class="token double-colon punctuation">::</span><span class="token function">ApplyFireDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>bCanApplyDamage<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">ApplyPointDamage</span><span class="token punctuation">(</span>MyCharacter<span class="token punctuation">,</span> <span class="token number">200.0f</span><span class="token punctuation">,</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> MyHit<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> FireDamageType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Next, we'll create the <strong>MedKit</strong> for players to pick up to regain health. Create a new actor and call it <code>MedKit</code>. In the <code>.h</code> file include the character <code>.h</code> file, in my example my character file is called <code>UnrealCPPCharacter.h</code>. Then add <code>OnOverlap</code> <code>UFUNCTION()</code>, then add a character <code>UPROPERTY</code>. Below is the final <code>MedKit.h</code> file.</p>
<h4>MedKit.h</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/Actor.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPCharacter.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"MedKit.generated.h"</span></span>

<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">UNREALCPP_API</span> AMedKit <span class="token operator">:</span> <span class="token keyword">public</span> AActor
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
<span class="token keyword">public</span><span class="token operator">:</span>	
	<span class="token comment">// Sets default values for this actor's properties</span>
	<span class="token function">AMedKit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>	

	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">OnOverlap</span><span class="token punctuation">(</span>AActor<span class="token operator">*</span> MyOverlappedActor<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	AUnrealCPPCharacter<span class="token operator">*</span> MyCharacter<span class="token punctuation">;</span>
	
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Next, inside the <code>MedKit.cpp</code>, in the constructor function we'll setup the <code>OnOverlap</code> delegate. Every actor has an <code>OnOverlap</code> delegate. Next, create the <code>OnOverlap</code> function. In the <code>OnOverlap</code> function we check if the the overlapped actor is inherits from our character class (is the actor our player), then we check if the player's health less than 100%, then we run the character's function <code>UpdateHealth</code> with specified amount, in this example I added in <code>100.0f</code> point of health, then we destroy the actor. Earlier in the tutorial, I set the character's <code>FullHealth</code> variable to <code>1000.0f</code>, so <code>100.0f</code> is 10% of the player's health. Below is the final <code>MedKit.cpp</code>. You'll notice in the below code that I omit the <code>BeginPlay</code> and <code>Tick</code> functions because they are not needed in this actor.</p>
<h4>MedKit.cpp</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"MedKit.h"</span></span>

<span class="token comment">// Sets default values</span>
<span class="token class-name">AMedKit</span><span class="token double-colon punctuation">::</span><span class="token function">AMedKit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	OnActorBeginOverlap<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AMedKit<span class="token double-colon punctuation">::</span>OnOverlap<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AMedKit</span><span class="token double-colon punctuation">::</span><span class="token function">OnOverlap</span><span class="token punctuation">(</span>AActor<span class="token operator">*</span> MyOverlappedActor<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">!=</span> <span class="token keyword">nullptr</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> 
	<span class="token punctuation">{</span>
		MyCharacter <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>AUnrealCPPCharacter<span class="token operator">></span></span></span><span class="token punctuation">(</span>OtherActor<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>MyCharacter <span class="token operator">&amp;&amp;</span> MyCharacter<span class="token operator">-></span><span class="token function">GetHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1.0f</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			MyCharacter<span class="token operator">-></span><span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token number">100.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>	
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>//////// AFTER the UUSERWIDGET is created ////////</p>
<p>Now let's go into the main file that establishes the HUD, in my project the HUD file is called <code>UnrealCPPHUD.h</code>. Inside this header file we'll add two <code>USERWIDGET</code> properties that we'll use in the <code>.cpp</code> file. We'll also <code>override</code> the <code>BeginPlay</code> function because we will be adding the <code>UserWidget</code> to the viewport in that function. Below is the final HUD <code>header</code> file.</p>
<h4>UnrealCPPHUD.h</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/HUD.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPHUD.generated.h"</span></span>

<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">AUnrealCPPHUD</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">AHUD</span></span>
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">AUnrealCPPHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Primary draw call for the HUD */</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">DrawHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">/** Crosshair asset pointer */</span>
	<span class="token keyword">class</span> <span class="token class-name">UTexture2D</span><span class="token operator">*</span> CrosshairTex<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	TSubclassOf<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">UUserWidget</span><span class="token operator">></span> HUDWidgetClass<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UUserWidget</span><span class="token operator">*</span> CurrentWidget<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>Next, inside the <code>HUD</code>'s <code>.cpp</code> file, in <code>constructor</code> function we will find the <code>Health_UI</code> that will create and set it to the <code>HUDWidgetClass</code>. In the <code>BeginPlay</code> function we'll set our <code>CurrentWidget</code> property and if we're successful in creating the widget we'll run <code>AddToViewport</code>. Below is the final <code>HUD</code> <code>.cpp</code> file.</p>
<h4>UnrealCPPHUD.cpp</h4>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPHUD.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Engine/Canvas.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Engine/Texture2D.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"TextureResource.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CanvasItem.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UObject/ConstructorHelpers.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Blueprint/UserWidget.h"</span></span>


<span class="token class-name">AUnrealCPPHUD</span><span class="token double-colon punctuation">::</span><span class="token function">AUnrealCPPHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Set the crosshair texture</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token double-colon punctuation">::</span>FObjectFinder<span class="token operator">&lt;</span>UTexture2D<span class="token operator">></span> <span class="token function">CrosshairTexObj</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"/Game/FirstPerson/Textures/FirstPersonCrosshair"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	CrosshairTex <span class="token operator">=</span> CrosshairTexObj<span class="token punctuation">.</span>Object<span class="token punctuation">;</span>

	<span class="token keyword">static</span> ConstructorHelpers<span class="token double-colon punctuation">::</span>FClassFinder<span class="token operator">&lt;</span>UUserWidget<span class="token operator">></span> <span class="token function">HealthBarObj</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"/Game/FirstPerson/UI/Health_UI"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	HUDWidgetClass <span class="token operator">=</span> HealthBarObj<span class="token punctuation">.</span>Class<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPHUD</span><span class="token double-colon punctuation">::</span><span class="token function">DrawHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">DrawHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Draw very simple crosshair</span>

	<span class="token comment">// find center of the Canvas</span>
	<span class="token keyword">const</span> FVector2D <span class="token function">Center</span><span class="token punctuation">(</span>Canvas<span class="token operator">-></span>ClipX <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">,</span> Canvas<span class="token operator">-></span>ClipY <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// offset by half the texture's dimensions so that the center of the texture aligns with the center of the Canvas</span>
	<span class="token keyword">const</span> FVector2D <span class="token function">CrosshairDrawPosition</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>Center<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">,</span>
										   <span class="token punctuation">(</span>Center<span class="token punctuation">.</span>Y <span class="token operator">+</span> <span class="token number">20.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// draw the crosshair</span>
	FCanvasTileItem <span class="token function">TileItem</span><span class="token punctuation">(</span> CrosshairDrawPosition<span class="token punctuation">,</span> CrosshairTex<span class="token operator">-></span>Resource<span class="token punctuation">,</span> FLinearColor<span class="token double-colon punctuation">::</span>White<span class="token punctuation">)</span><span class="token punctuation">;</span>
	TileItem<span class="token punctuation">.</span>BlendMode <span class="token operator">=</span> SE_BLEND_Translucent<span class="token punctuation">;</span>
	Canvas<span class="token operator">-></span><span class="token function">DrawItem</span><span class="token punctuation">(</span> TileItem <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPHUD</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>HUDWidgetClass <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		CurrentWidget <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateWidget</span><span class="token generic class-name"><span class="token operator">&lt;</span>UUserWidget<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> HUDWidgetClass<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>CurrentWidget<span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			CurrentWidget<span class="token operator">-></span><span class="token function">AddToViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Inside the UE4 editor we have to create a Float Curve Timeline. The timeline will be used for smooth transitions for the magic meter. In your content folder, right click, go to Miscellaneous > Curve and create new Curve Float. Open the curve float and create a new key by right clicking and selecting new key. In the top left set the values of the first key to have the values of 0 for Time and Value. Create a second key and set its Time value to 2.0 and its Value property to 1.0. Hold SHIFT, select both keys and then click Auto in the top bar to give the curve a smooth beginning and end.</p>
<h3>Magic Float Curve</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/float-curve-two-seconds_qyux5a.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/float-curve-two-seconds_qyux5a.png" alt="magic float curve" title="magic float curve"></a></p>
<p>Next, in your content folder, right click then > User Interface then > select Widget Blueprint. Inside the Widget Blueprint drag and drop an progress bar property into the viewport. Put it in the top left corner. We are going to mimic the Wither 3 health bar. Below are the images we will be using. There is a background image with black fill and a full health bar with a red fill. Drag both images into your content folder, then convert them to sprites. These two images can be placed in the progress bar's details panel where both images can be placed respectively.</p>
<h3>Health Bar Empty</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-empty_za1pqd.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-empty_za1pqd.png" alt="health bar empty" title="health bar empty"></a></p>
<h3>Health Bar Full</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-full_uahmmd.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-full_uahmmd.png" alt="health bar full" title="health bar full"></a></p>
<p>Also, provided is the Wither 3 symbol which can be placed to the left of the health bar, this is only for style and aesthetics.</p>
<h3>Witcher Symbol</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/witcher-symbol_x69wji.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/witcher-symbol_x69wji.png" alt="Witcher Symbol" title="Witcher Symbol"></a></p>
<h3>Create Sprites</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/convert-to-sprite_vydmyq.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/convert-to-sprite_vydmyq.png" alt="Create Sprites" title="Create Sprites"></a></p>
<h3>Health Bar UI 1</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-1_gbl7av.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-1_gbl7av.png" alt="Health Bar UI 1" title="Health Bar UI 1"></a></p>
<h3>Health Bar UI 2</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-2_hy4m31.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-2_hy4m31.png" alt="Health Bar UI 2" title="Health Bar UI 2"></a></p>
<h3>Health Bar UI 3</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-3_a114hj.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-3_a114hj.png" alt="Health Bar UI 3" title="Health Bar UI 3"></a></p>
<p>Drag and drop a text element next to the health bar. This will represent the health in percentage</p>
<h3>Health Bar UI 4</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-4_beajld.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-4_beajld.png" alt="Health Bar UI 4" title="Health Bar UI 4"></a></p>
<h3>Health Bar UI 5</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-5_fq0v6z.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-5_fq0v6z.png" alt="Health Bar UI 5" title="Health Bar UI 5"></a></p>
<p>Drag in a second progress bar and put it above the health bar. Make it skinnier and design it as you wish. This will be the magic meter. Then drag in another text element and rest it next to the magic meter. This will represent the magic as numbers.</p>
<h3>Health Bar UI 6</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-6_tihnin.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-6_tihnin.png" alt="Health Bar UI 6" title="Health Bar UI 6"></a></p>
<h3>Health Bar UI 7</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-7_tfzzhh.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-7_tfzzhh.png" alt="Health Bar UI 7" title="Health Bar UI 7"></a></p>
<p>In the content folder drag the red image provided image below into your content folder. Covert the image to a sprite. Drag an image element into your UserWidget. Set the image as the red image. Anchor the image to bee full screen. We are going to create a red flash animation. Use the animation tools below to create a 2 second animation that changes the alpha of the red image from 0 to 0.5 every half second. We will use this animation to indicate that the player is receiving damage.</p>
<h3>Red Image</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/red_wvyvum.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/red_wvyvum.png" alt="Red Image" title="Red Image"></a></p>
<h3>Health Bar UI 8</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-8_eq9tsp.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-8_eq9tsp.png" alt="Health Bar UI 8" title="Health Bar UI 8"></a></p>
<h3>Health Bar UI 9</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-9_lqp9eh.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/health-bar-ui-9_lqp9eh.png" alt="Health Bar UI 9" title="Health Bar UI 9"></a></p>
<p>For this next part we have to do some very quick work in blueprints to bind these UI elements to our C++ functions. Select the Health Bar UI element and under the <strong>Progress</strong> tab for percent attribute select <strong>Bind</strong>, then <strong>Create Binding</strong>. This will open the UI's bind function graph. In the event graph we will simply find the player, cast to the player and then run the function to return the desired value. Make the blueprint cast function pure by right clicking it and clicking <strong>Convert to Pure Cast</strong>. Follow this same process for text elements and the magic elements. Below are images of the blueprint functions for the four UI elements.</p>
<h3>Bind Health Bar Percentage</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-health_hhyouh.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-health_hhyouh.png" alt="Health Bar BP" title="Health Bar BP"></a></p>
<h3>Bind Health Bar Text</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-health-text_jqgqtf.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-health-text_jqgqtf.png" alt="Health Bar BP Text" title="Health Bar BP Text"></a></p>
<h3>Bind Magic Bar Percentage</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-magic_la1l93.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-magic_la1l93.png" alt="Magic Bar BP" title="Magic Bar BP"></a></p>
<h3>Bind Magic Bar Text</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-magic-text_izzjwt.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-magic-text_izzjwt.png" alt="Magic Bar BP Text" title="Magic Bar Text"></a></p>
<p>Next, we will bind the animation in the User Widget's Event Graph. We will use the <code>Tick</code> function to check if we need to run the animation. We'll use a simple to bool to determine if we need to play the animation. The animation created in the UI, I called it <strong>Flash</strong> will be a variable under the Animation variables section.</p>
<h3>Animation bind to Tick Function</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-red-flash_ffyq9w.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/bp-get-red-flash_ffyq9w.png" alt="Event Graph Animation BP" title="Event Graph Animation BP"></a></p>
<p>Inside the editor, compile the code. Drag in the camp fire. Set the particle component to have the fire particle effect, set overlap events to true, then set collision presets name to Trigger. Then drag in the MedKit, add a mesh component, resize it if necessary, set overlap events to true, then set collision presets name to Trigger.</p>
<h3>Generate Overlap Events</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/generate-overlap-events_ex2vzh.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/generate-overlap-events_ex2vzh.png" alt="Generate Overlap Events" title="Generate Overlap Events"></a></p>
<h3>Set Collision Presets</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/collision-presets_zisyqo.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/collision-presets_zisyqo.png" alt="Set Collision Presets" title="Set Collision Presets"></a></p>
<p>In the Player character set the materials to two materials you want to use to switch between.</p>
<h3>Set Gun Materials</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/set-gun-materials_ojv5jx.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/set-gun-materials_ojv5jx.png" alt="Event Graph Animation BP" title="Event Graph Animation BP"></a></p>
<h3>Simple BP for Making a Glowing Red Material</h3>
<p><a href="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/red-glow-material_jtrrjh.png"><img src="https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/red-glow-material_jtrrjh.png" alt="Glowing Red BP" title="Glowing Red BP"></a></p>
<p>Everything should be set. Compile the code and you should have working UI. Below is the final code.</p>
<h3>CampFire.h</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/Actor.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/BoxComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Particles/ParticleSystemComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CampFire.generated.h"</span></span>

<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">UNREALCPP_API</span> ACampFire <span class="token operator">:</span> <span class="token keyword">public</span> AActor
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
<span class="token keyword">public</span><span class="token operator">:</span>	
	<span class="token comment">// Sets default values for this actor's properties</span>
	<span class="token function">ACampFire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>	

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	UParticleSystemComponent<span class="token operator">*</span> Fire<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	UBoxComponent<span class="token operator">*</span> MyBoxComponent<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	TSubclassOf<span class="token operator">&lt;</span>UDamageType<span class="token operator">></span> FireDamageType<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	AActor<span class="token operator">*</span> MyCharacter<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	FHitResult MyHit<span class="token punctuation">;</span>

	<span class="token keyword">bool</span> bCanApplyDamage<span class="token punctuation">;</span>
	FTimerHandle FireTimerHandle<span class="token punctuation">;</span>

	<span class="token comment">// declare overlap begin function</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">OnOverlapBegin</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">AActor</span><span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> bFromSweep<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult<span class="token operator">&amp;</span> SweepResult<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// declare overlap end function</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">OnOverlapEnd</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">AActor</span><span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">ApplyFireDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h3>CampFire.cpp</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CampFire.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Kismet/GameplayStatics.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"TimerManager.h"</span></span>

<span class="token comment">// Sets default values</span>
<span class="token class-name">ACampFire</span><span class="token double-colon punctuation">::</span><span class="token function">ACampFire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	MyBoxComponent <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>UBoxComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"My Box Component"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    MyBoxComponent<span class="token operator">-></span><span class="token function">InitBoxExtent</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">50.0f</span><span class="token punctuation">,</span><span class="token number">50.0f</span><span class="token punctuation">,</span><span class="token number">50.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    RootComponent <span class="token operator">=</span> MyBoxComponent<span class="token punctuation">;</span>

    Fire <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>UParticleSystemComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"My Fire"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Fire<span class="token operator">-></span><span class="token function">SetRelativeLocation</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    Fire<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

    MyBoxComponent<span class="token operator">-></span>OnComponentBeginOverlap<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACampFire<span class="token double-colon punctuation">::</span>OnOverlapBegin<span class="token punctuation">)</span><span class="token punctuation">;</span>
    MyBoxComponent<span class="token operator">-></span>OnComponentEndOverlap<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACampFire<span class="token double-colon punctuation">::</span>OnOverlapEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

    bCanApplyDamage <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">ACampFire</span><span class="token double-colon punctuation">::</span><span class="token function">OnOverlapBegin</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">AActor</span><span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">,</span> <span class="token keyword">bool</span> bFromSweep<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult<span class="token operator">&amp;</span> SweepResult<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">!=</span> <span class="token keyword">nullptr</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span> OtherComp <span class="token operator">!=</span> <span class="token keyword">nullptr</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        bCanApplyDamage <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        MyCharacter <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>AActor<span class="token operator">></span></span></span><span class="token punctuation">(</span>OtherActor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        MyHit <span class="token operator">=</span> SweepResult<span class="token punctuation">;</span>
        <span class="token function">GetWorldTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTimer</span><span class="token punctuation">(</span>FireTimerHandle<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACampFire<span class="token double-colon punctuation">::</span>ApplyFireDamage<span class="token punctuation">,</span> <span class="token number">2.2f</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">ACampFire</span><span class="token double-colon punctuation">::</span><span class="token function">OnOverlapEnd</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OverlappedComp<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">AActor</span><span class="token operator">*</span> OtherActor<span class="token punctuation">,</span> <span class="token keyword">class</span> <span class="token class-name">UPrimitiveComponent</span><span class="token operator">*</span> OtherComp<span class="token punctuation">,</span> int32 OtherBodyIndex<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    bCanApplyDamage <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token function">GetWorldTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ClearTimer</span><span class="token punctuation">(</span>FireTimerHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">ACampFire</span><span class="token double-colon punctuation">::</span><span class="token function">ApplyFireDamage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>bCanApplyDamage<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">ApplyPointDamage</span><span class="token punctuation">(</span>MyCharacter<span class="token punctuation">,</span> <span class="token number">200.0f</span><span class="token punctuation">,</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> MyHit<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> FireDamageType<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>MedKit.h</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/Actor.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPCharacter.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"MedKit.generated.h"</span></span>

<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">UNREALCPP_API</span> AMedKit <span class="token operator">:</span> <span class="token keyword">public</span> AActor
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
<span class="token keyword">public</span><span class="token operator">:</span>	
	<span class="token comment">// Sets default values for this actor's properties</span>
	<span class="token function">AMedKit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>	

	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">OnOverlap</span><span class="token punctuation">(</span>AActor<span class="token operator">*</span> MyOverlappedActor<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">)</span>
	AUnrealCPPCharacter<span class="token operator">*</span> MyCharacter<span class="token punctuation">;</span>
	
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h3>MedKit.cpp</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"MedKit.h"</span></span>

<span class="token comment">// Sets default values</span>
<span class="token class-name">AMedKit</span><span class="token double-colon punctuation">::</span><span class="token function">AMedKit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	OnActorBeginOverlap<span class="token punctuation">.</span><span class="token function">AddDynamic</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AMedKit<span class="token double-colon punctuation">::</span>OnOverlap<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AMedKit</span><span class="token double-colon punctuation">::</span><span class="token function">OnOverlap</span><span class="token punctuation">(</span>AActor<span class="token operator">*</span> MyOverlappedActor<span class="token punctuation">,</span> AActor<span class="token operator">*</span> OtherActor<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">!=</span> <span class="token keyword">nullptr</span> <span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>OtherActor <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">)</span> 
	<span class="token punctuation">{</span>
		MyCharacter <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>AUnrealCPPCharacter<span class="token operator">></span></span></span><span class="token punctuation">(</span>OtherActor<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>MyCharacter <span class="token operator">&amp;&amp;</span> MyCharacter<span class="token operator">-></span><span class="token function">GetHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1.0f</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			MyCharacter<span class="token operator">-></span><span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token number">100.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>	
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>UnrealCPP.Build.cs</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token keyword">using</span> UnrealBuildTool<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UnrealCPP</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token class-name">ModuleRules</span></span>
<span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token function">UnrealCPP</span><span class="token punctuation">(</span>ReadOnlyTargetRules Target<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">base</span><span class="token punctuation">(</span>Target<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		PCHUsage <span class="token operator">=</span> PCHUsageMode<span class="token punctuation">.</span>UseExplicitOrSharedPCHs<span class="token punctuation">;</span>

		PublicDependencyModuleNames<span class="token punctuation">.</span><span class="token function">AddRange</span><span class="token punctuation">(</span><span class="token keyword">new</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">"Core"</span><span class="token punctuation">,</span> <span class="token string">"CoreUObject"</span><span class="token punctuation">,</span> <span class="token string">"Engine"</span><span class="token punctuation">,</span> <span class="token string">"InputCore"</span><span class="token punctuation">,</span> <span class="token string">"HeadMountedDisplay"</span><span class="token punctuation">,</span> <span class="token string">"UMG"</span><span class="token punctuation">,</span> <span class="token string">"Slate"</span><span class="token punctuation">,</span> <span class="token string">"SlateCore"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>UnrealCPPCharacter.h</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/Character.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/TimelineComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/BoxComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPCharacter.generated.h"</span></span>

<span class="token keyword">class</span> <span class="token class-name">UInputComponent</span><span class="token punctuation">;</span>

<span class="token function">UCLASS</span><span class="token punctuation">(</span>config<span class="token operator">=</span>Game<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">AUnrealCPPCharacter</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">ACharacter</span></span>
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">/** Pawn mesh: 1st person view (arms; seen only by self) */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category<span class="token operator">=</span>Mesh<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">USkeletalMeshComponent</span><span class="token operator">*</span> Mesh1P<span class="token punctuation">;</span>

	<span class="token comment">/** Gun mesh: 1st person view (seen only by self) */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Mesh<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">USkeletalMeshComponent</span><span class="token operator">*</span> FP_Gun<span class="token punctuation">;</span>

	<span class="token comment">/** Location on gun mesh where projectiles should spawn. */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Mesh<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">USceneComponent</span><span class="token operator">*</span> FP_MuzzleLocation<span class="token punctuation">;</span>

	<span class="token comment">/** Gun mesh: VR view (attached to the VR controller directly, no arm, just the actual gun) */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Mesh<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">USkeletalMeshComponent</span><span class="token operator">*</span> VR_Gun<span class="token punctuation">;</span>

	<span class="token comment">/** Location on VR gun mesh where projectiles should spawn. */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleDefaultsOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Mesh<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">USceneComponent</span><span class="token operator">*</span> VR_MuzzleLocation<span class="token punctuation">;</span>

	<span class="token comment">/** First person camera */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category <span class="token operator">=</span> Camera<span class="token punctuation">,</span> meta <span class="token operator">=</span> <span class="token punctuation">(</span>AllowPrivateAccess <span class="token operator">=</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UCameraComponent</span><span class="token operator">*</span> FirstPersonCameraComponent<span class="token punctuation">;</span>

	<span class="token comment">/** Motion controller (right hand) */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> meta <span class="token operator">=</span> <span class="token punctuation">(</span>AllowPrivateAccess <span class="token operator">=</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UMotionControllerComponent</span><span class="token operator">*</span> R_MotionController<span class="token punctuation">;</span>

	<span class="token comment">/** Motion controller (left hand) */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> meta <span class="token operator">=</span> <span class="token punctuation">(</span>AllowPrivateAccess <span class="token operator">=</span> <span class="token string">"true"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UMotionControllerComponent</span><span class="token operator">*</span> L_MotionController<span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">AUnrealCPPCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Tick</span><span class="token punctuation">(</span><span class="token keyword">float</span> DeltaTime<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>

	<span class="token comment">// virtual float TakeDamage(float DamageAmount, struct FDamageEvent const &amp; DamageEvent, class AController * EventInstigator, AActor * DamageCauser);</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">/** Base turn rate, in deg/sec. Other scaling may affect final turn rate. */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category<span class="token operator">=</span>Camera<span class="token punctuation">)</span>
	<span class="token keyword">float</span> BaseTurnRate<span class="token punctuation">;</span>

	<span class="token comment">/** Base look up/down rate, in deg/sec. Other scaling may affect final rate. */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>VisibleAnywhere<span class="token punctuation">,</span> BlueprintReadOnly<span class="token punctuation">,</span> Category<span class="token operator">=</span>Camera<span class="token punctuation">)</span>
	<span class="token keyword">float</span> BaseLookUpRate<span class="token punctuation">;</span>

	<span class="token comment">/** Gun muzzle's offset from the characters location */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category<span class="token operator">=</span>Gameplay<span class="token punctuation">)</span>
	FVector GunOffset<span class="token punctuation">;</span>

	<span class="token comment">/** Projectile class to spawn */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditDefaultsOnly<span class="token punctuation">,</span> Category<span class="token operator">=</span>Projectile<span class="token punctuation">)</span>
	TSubclassOf<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">AUnrealCPPProjectile</span><span class="token operator">></span> ProjectileClass<span class="token punctuation">;</span>

	<span class="token comment">/** Sound to play each time we fire */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category<span class="token operator">=</span>Gameplay<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">USoundBase</span><span class="token operator">*</span> FireSound<span class="token punctuation">;</span>

	<span class="token comment">/** AnimMontage to play each time we fire */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> Gameplay<span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UAnimMontage</span><span class="token operator">*</span> FireAnimation<span class="token punctuation">;</span>

	<span class="token comment">/** Whether to use motion controller location for aiming. */</span>
	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> Gameplay<span class="token punctuation">)</span>
	uint32 bUsingMotionControllers <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> FullHealth<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> Health<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> HealthPercentage<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> PreviousHealth<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> FullMagic<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> Magic<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> MagicPercentage<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> PreviousMagic<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> MagicValue<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> redFlash<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> BlueprintReadWrite<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	UCurveFloat <span class="token operator">*</span>MagicCurve<span class="token punctuation">;</span>

	FTimeline MyTimeline<span class="token punctuation">;</span>
	<span class="token keyword">float</span> CurveFloatValue<span class="token punctuation">;</span>
	<span class="token keyword">float</span> TimelineValue<span class="token punctuation">;</span>
	FTimerHandle MemberTimerHandle<span class="token punctuation">;</span>

	<span class="token keyword">bool</span> bCanUseMagic<span class="token punctuation">;</span>

	<span class="token comment">/** Get Health */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> <span class="token function">GetHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Get Magic */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">float</span> <span class="token function">GetMagic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Get Health Text */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	FText <span class="token function">GetHealthIntText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Get Magic Text */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	FText <span class="token function">GetMagicIntText</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Damage Timer */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">DamageTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Set Damage State */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">SetDamageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Set Magic Value */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">SetMagicValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Set Damage State */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">SetMagicState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Set Damage State */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">SetMagicChange</span><span class="token punctuation">(</span><span class="token keyword">float</span> MagicChange<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Set Damage State */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">UpdateMagic</span><span class="token punctuation">(</span><span class="token keyword">float</span> MagicChange<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Play Flash */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">bool</span> <span class="token function">PlayFlash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UMaterialInterface</span><span class="token operator">*</span> GunDefaultMaterial<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Magic"</span><span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UMaterialInterface</span><span class="token operator">*</span> GunOverheatMaterial<span class="token punctuation">;</span>

	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">ReceivePointDamage</span><span class="token punctuation">(</span><span class="token keyword">float</span> Damage<span class="token punctuation">,</span> <span class="token keyword">const</span> UDamageType <span class="token operator">*</span> DamageType<span class="token punctuation">,</span> FVector HitLocation<span class="token punctuation">,</span> FVector HitNormal<span class="token punctuation">,</span> UPrimitiveComponent <span class="token operator">*</span> HitComponent<span class="token punctuation">,</span> FName BoneName<span class="token punctuation">,</span> FVector ShotFromDirection<span class="token punctuation">,</span> AController <span class="token operator">*</span> InstigatedBy<span class="token punctuation">,</span> AActor <span class="token operator">*</span> DamageCauser<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult <span class="token operator">&amp;</span> HitInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintCallable<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Power"</span><span class="token punctuation">)</span>
	<span class="token keyword">void</span> <span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token keyword">float</span> HealthChange<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">protected</span><span class="token operator">:</span>
	
	<span class="token comment">/** Fires a projectile. */</span>
	<span class="token keyword">void</span> <span class="token function">OnFire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Resets HMD orientation and position in VR. */</span>
	<span class="token keyword">void</span> <span class="token function">OnResetVR</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Handles moving forward/backward */</span>
	<span class="token keyword">void</span> <span class="token function">MoveForward</span><span class="token punctuation">(</span><span class="token keyword">float</span> Val<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Handles stafing movement, left and right */</span>
	<span class="token keyword">void</span> <span class="token function">MoveRight</span><span class="token punctuation">(</span><span class="token keyword">float</span> Val<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Called via input to turn at a given rate.
	 * @param Rate	This is a normalized rate, i.e. 1.0 means 100% of desired turn rate
	 */</span>
	<span class="token keyword">void</span> <span class="token function">TurnAtRate</span><span class="token punctuation">(</span><span class="token keyword">float</span> Rate<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/**
	 * Called via input to turn look up/down at a given rate.
	 * @param Rate	This is a normalized rate, i.e. 1.0 means 100% of desired turn rate
	 */</span>
	<span class="token keyword">void</span> <span class="token function">LookUpAtRate</span><span class="token punctuation">(</span><span class="token keyword">float</span> Rate<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">struct</span> <span class="token class-name">TouchData</span>
	<span class="token punctuation">{</span>
		<span class="token function">TouchData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> bIsPressed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>Location<span class="token operator">=</span>FVector<span class="token double-colon punctuation">::</span>ZeroVector<span class="token punctuation">;</span><span class="token punctuation">}</span>
		<span class="token keyword">bool</span> bIsPressed<span class="token punctuation">;</span>
		ETouchIndex<span class="token double-colon punctuation">::</span>Type FingerIndex<span class="token punctuation">;</span>
		FVector Location<span class="token punctuation">;</span>
		<span class="token keyword">bool</span> bMoved<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">BeginTouch</span><span class="token punctuation">(</span><span class="token keyword">const</span> ETouchIndex<span class="token double-colon punctuation">::</span>Type FingerIndex<span class="token punctuation">,</span> <span class="token keyword">const</span> FVector Location<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">EndTouch</span><span class="token punctuation">(</span><span class="token keyword">const</span> ETouchIndex<span class="token double-colon punctuation">::</span>Type FingerIndex<span class="token punctuation">,</span> <span class="token keyword">const</span> FVector Location<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">TouchUpdate</span><span class="token punctuation">(</span><span class="token keyword">const</span> ETouchIndex<span class="token double-colon punctuation">::</span>Type FingerIndex<span class="token punctuation">,</span> <span class="token keyword">const</span> FVector Location<span class="token punctuation">)</span><span class="token punctuation">;</span>
	TouchData	TouchItem<span class="token punctuation">;</span>
	
<span class="token keyword">protected</span><span class="token operator">:</span>
	<span class="token comment">// APawn interface</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">SetupPlayerInputComponent</span><span class="token punctuation">(</span>UInputComponent<span class="token operator">*</span> InputComponent<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>
	<span class="token comment">// End of APawn interface</span>

	<span class="token comment">/* 
	 * Configures input for touchscreen devices if there is a valid touch interface for doing so 
	 *
	 * @param	InputComponent	The input component pointer to bind controls to
	 * @returns true if touch controls were enabled.
	 */</span>
	<span class="token keyword">bool</span> <span class="token function">EnableTouchscreenMovement</span><span class="token punctuation">(</span>UInputComponent<span class="token operator">*</span> InputComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token comment">/** Returns Mesh1P subobject **/</span>
	FORCEINLINE <span class="token keyword">class</span> <span class="token class-name">USkeletalMeshComponent</span><span class="token operator">*</span> <span class="token function">GetMesh1P</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> Mesh1P<span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token comment">/** Returns FirstPersonCameraComponent subobject **/</span>
	FORCEINLINE <span class="token keyword">class</span> <span class="token class-name">UCameraComponent</span><span class="token operator">*</span> <span class="token function">GetFirstPersonCameraComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> FirstPersonCameraComponent<span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h3>UnrealCPPCharacter.cpp</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPCharacter.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPProjectile.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Animation/AnimInstance.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Camera/CameraComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/CapsuleComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Components/InputComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/InputSettings.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"HeadMountedDisplayFunctionLibrary.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Kismet/GameplayStatics.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"MotionControllerComponent.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"XRMotionControllerBase.h"</span> <span class="token comment">// for FXRMotionControllerBase::RightHandSourceId</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Kismet/KismetMathLibrary.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"TimerManager.h"</span></span>

<span class="token function">DEFINE_LOG_CATEGORY_STATIC</span><span class="token punctuation">(</span>LogFPChar<span class="token punctuation">,</span> Warning<span class="token punctuation">,</span> All<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//////////////////////////////////////////////////////////////////////////</span>
<span class="token comment">// AUnrealCPPCharacter</span>

<span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">AUnrealCPPCharacter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Set size for collision capsule</span>
	<span class="token function">GetCapsuleComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">InitCapsuleSize</span><span class="token punctuation">(</span><span class="token number">55.f</span><span class="token punctuation">,</span> <span class="token number">96.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// set our turn rates for input</span>
	BaseTurnRate <span class="token operator">=</span> <span class="token number">45.f</span><span class="token punctuation">;</span>
	BaseLookUpRate <span class="token operator">=</span> <span class="token number">45.f</span><span class="token punctuation">;</span>

	<span class="token comment">// Create a CameraComponent	</span>
	FirstPersonCameraComponent <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>UCameraComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"FirstPersonCamera"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	FirstPersonCameraComponent<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span><span class="token function">GetCapsuleComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	FirstPersonCameraComponent<span class="token operator">-></span>RelativeLocation <span class="token operator">=</span> <span class="token function">FVector</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">39.56f</span><span class="token punctuation">,</span> <span class="token number">1.75f</span><span class="token punctuation">,</span> <span class="token number">64.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Position the camera</span>
	FirstPersonCameraComponent<span class="token operator">-></span>bUsePawnControlRotation <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

	<span class="token comment">// Create a mesh component that will be used when being viewed from a '1st person' view (when controlling this pawn)</span>
	Mesh1P <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>USkeletalMeshComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"CharacterMesh1P"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mesh1P<span class="token operator">-></span><span class="token function">SetOnlyOwnerSee</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mesh1P<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>FirstPersonCameraComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mesh1P<span class="token operator">-></span>bCastDynamicShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	Mesh1P<span class="token operator">-></span>CastShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	Mesh1P<span class="token operator">-></span>RelativeRotation <span class="token operator">=</span> <span class="token function">FRotator</span><span class="token punctuation">(</span><span class="token number">1.9f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">19.19f</span><span class="token punctuation">,</span> <span class="token number">5.2f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	Mesh1P<span class="token operator">-></span>RelativeLocation <span class="token operator">=</span> <span class="token function">FVector</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">0.5f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">4.4f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">155.7f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create a gun mesh component</span>
	FP_Gun <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>USkeletalMeshComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"FP_Gun"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	FP_Gun<span class="token operator">-></span><span class="token function">SetOnlyOwnerSee</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// only the owning player will see this mesh</span>
	FP_Gun<span class="token operator">-></span>bCastDynamicShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	FP_Gun<span class="token operator">-></span>CastShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token comment">// FP_Gun->SetupAttachment(Mesh1P, TEXT("GripPoint"));</span>
	FP_Gun<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

	FP_MuzzleLocation <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>USceneComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"MuzzleLocation"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	FP_MuzzleLocation<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>FP_Gun<span class="token punctuation">)</span><span class="token punctuation">;</span>
	FP_MuzzleLocation<span class="token operator">-></span><span class="token function">SetRelativeLocation</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">0.2f</span><span class="token punctuation">,</span> <span class="token number">48.4f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10.6f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Default offset from the character location for projectiles to spawn</span>
	GunOffset <span class="token operator">=</span> <span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">100.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">10.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Note: The ProjectileClass and the skeletal mesh/anim blueprints for Mesh1P, FP_Gun, and VR_Gun </span>
	<span class="token comment">// are set in the derived blueprint asset named MyCharacter to avoid direct content references in C++.</span>

	<span class="token comment">// Create VR Controllers.</span>
	R_MotionController <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>UMotionControllerComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"R_MotionController"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	R_MotionController<span class="token operator">-></span>MotionSource <span class="token operator">=</span> FXRMotionControllerBase<span class="token double-colon punctuation">::</span>RightHandSourceId<span class="token punctuation">;</span>
	R_MotionController<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
	L_MotionController <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>UMotionControllerComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"L_MotionController"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	L_MotionController<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>RootComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Create a gun and attach it to the right-hand VR controller.</span>
	<span class="token comment">// Create a gun mesh component</span>
	VR_Gun <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>USkeletalMeshComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"VR_Gun"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	VR_Gun<span class="token operator">-></span><span class="token function">SetOnlyOwnerSee</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">// only the owning player will see this mesh</span>
	VR_Gun<span class="token operator">-></span>bCastDynamicShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	VR_Gun<span class="token operator">-></span>CastShadow <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	VR_Gun<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>R_MotionController<span class="token punctuation">)</span><span class="token punctuation">;</span>
	VR_Gun<span class="token operator">-></span><span class="token function">SetRelativeRotation</span><span class="token punctuation">(</span><span class="token function">FRotator</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">90.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	VR_MuzzleLocation <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateDefaultSubobject</span><span class="token generic class-name"><span class="token operator">&lt;</span>USceneComponent<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"VR_MuzzleLocation"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	VR_MuzzleLocation<span class="token operator">-></span><span class="token function">SetupAttachment</span><span class="token punctuation">(</span>VR_Gun<span class="token punctuation">)</span><span class="token punctuation">;</span>
	VR_MuzzleLocation<span class="token operator">-></span><span class="token function">SetRelativeLocation</span><span class="token punctuation">(</span><span class="token function">FVector</span><span class="token punctuation">(</span><span class="token number">0.000004</span><span class="token punctuation">,</span> <span class="token number">53.999992</span><span class="token punctuation">,</span> <span class="token number">10.000000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	VR_MuzzleLocation<span class="token operator">-></span><span class="token function">SetRelativeRotation</span><span class="token punctuation">(</span><span class="token function">FRotator</span><span class="token punctuation">(</span><span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">90.0f</span><span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// Counteract the rotation of the VR gun model.</span>

	<span class="token comment">// Uncomment the following line to turn motion controllers on by default:</span>
	<span class="token comment">//bUsingMotionControllers = true;</span>

<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Call the base class  </span>
	Super<span class="token operator">:</span><span class="token base-clause"><span class="token operator">:</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span>

	FullHealth <span class="token operator">=</span> <span class="token number">1000.0f</span><span class="token punctuation">;</span>
	Health <span class="token operator">=</span> FullHealth<span class="token punctuation">;</span>
	HealthPercentage <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
	PreviousHealth <span class="token operator">=</span> HealthPercentage<span class="token punctuation">;</span>
	bCanBeDamaged <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

	FullMagic <span class="token operator">=</span> <span class="token number">100.0f</span><span class="token punctuation">;</span>
	Magic <span class="token operator">=</span> FullMagic<span class="token punctuation">;</span>
	MagicPercentage <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
	PreviousMagic <span class="token operator">=</span> MagicPercentage<span class="token punctuation">;</span>
	MagicValue <span class="token operator">=</span> <span class="token number">0.0f</span><span class="token punctuation">;</span>
	bCanUseMagic <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>MagicCurve<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        FOnTimelineFloat TimelineCallback<span class="token punctuation">;</span>
        FOnTimelineEventStatic TimelineFinishedCallback<span class="token punctuation">;</span>

        TimelineCallback<span class="token punctuation">.</span><span class="token function">BindUFunction</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">FName</span><span class="token punctuation">(</span><span class="token string">"SetMagicValue"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        TimelineFinishedCallback<span class="token punctuation">.</span><span class="token function">BindUFunction</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> FName<span class="token punctuation">{</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"SetMagicState"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        MyTimeline<span class="token punctuation">.</span><span class="token function">AddInterpFloat</span><span class="token punctuation">(</span>MagicCurve<span class="token punctuation">,</span> TimelineCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
        MyTimeline<span class="token punctuation">.</span><span class="token function">SetTimelineFinishedFunc</span><span class="token punctuation">(</span>TimelineFinishedCallback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

	<span class="token comment">//Attach gun mesh component to Skeleton, doing it here because the skeleton is not yet created in the constructor</span>
	FP_Gun<span class="token operator">-></span><span class="token function">AttachToComponent</span><span class="token punctuation">(</span>Mesh1P<span class="token punctuation">,</span> <span class="token function">FAttachmentTransformRules</span><span class="token punctuation">(</span>EAttachmentRule<span class="token double-colon punctuation">::</span>SnapToTarget<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"GripPoint"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Show or hide the two versions of the gun based on whether or not we're using motion controllers.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>bUsingMotionControllers<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		VR_Gun<span class="token operator">-></span><span class="token function">SetHiddenInGame</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Mesh1P<span class="token operator">-></span><span class="token function">SetHiddenInGame</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{</span>
		VR_Gun<span class="token operator">-></span><span class="token function">SetHiddenInGame</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		Mesh1P<span class="token operator">-></span><span class="token function">SetHiddenInGame</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">Tick</span><span class="token punctuation">(</span><span class="token keyword">float</span> DeltaTime<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">Tick</span><span class="token punctuation">(</span>DeltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

	MyTimeline<span class="token punctuation">.</span><span class="token function">TickTimeline</span><span class="token punctuation">(</span>DeltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//////////////////////////////////////////////////////////////////////////</span>
<span class="token comment">// Input</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetupPlayerInputComponent</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UInputComponent</span><span class="token operator">*</span> PlayerInputComponent<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// set up gameplay key bindings</span>
	<span class="token function">check</span><span class="token punctuation">(</span>PlayerInputComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind jump events</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAction</span><span class="token punctuation">(</span><span class="token string">"Jump"</span><span class="token punctuation">,</span> IE_Pressed<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACharacter<span class="token double-colon punctuation">::</span>Jump<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAction</span><span class="token punctuation">(</span><span class="token string">"Jump"</span><span class="token punctuation">,</span> IE_Released<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>ACharacter<span class="token double-colon punctuation">::</span>StopJumping<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind fire event</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAction</span><span class="token punctuation">(</span><span class="token string">"Fire"</span><span class="token punctuation">,</span> IE_Pressed<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>OnFire<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Enable touchscreen input</span>
	<span class="token function">EnableTouchscreenMovement</span><span class="token punctuation">(</span>PlayerInputComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>

	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAction</span><span class="token punctuation">(</span><span class="token string">"ResetVR"</span><span class="token punctuation">,</span> IE_Pressed<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>OnResetVR<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Bind movement events</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"MoveForward"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>MoveForward<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"MoveRight"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>MoveRight<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// We have 2 versions of the rotation bindings to handle different kinds of devices differently</span>
	<span class="token comment">// "turn" handles devices that provide an absolute delta, such as a mouse.</span>
	<span class="token comment">// "turnrate" is for devices that we choose to treat as a rate of change, such as an analog joystick</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"Turn"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>APawn<span class="token double-colon punctuation">::</span>AddControllerYawInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"TurnRate"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>TurnAtRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"LookUp"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>APawn<span class="token double-colon punctuation">::</span>AddControllerPitchInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PlayerInputComponent<span class="token operator">-></span><span class="token function">BindAxis</span><span class="token punctuation">(</span><span class="token string">"LookUpRate"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>LookUpAtRate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">OnFire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// try and fire a projectile</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ProjectileClass <span class="token operator">!=</span> <span class="token constant">NULL</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">IsNearlyZero</span><span class="token punctuation">(</span>Magic<span class="token punctuation">,</span> <span class="token number">0.001f</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> bCanUseMagic<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		UWorld<span class="token operator">*</span> <span class="token keyword">const</span> World <span class="token operator">=</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>World <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>bUsingMotionControllers<span class="token punctuation">)</span>
			<span class="token punctuation">{</span>
				<span class="token keyword">const</span> FRotator SpawnRotation <span class="token operator">=</span> VR_MuzzleLocation<span class="token operator">-></span><span class="token function">GetComponentRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">const</span> FVector SpawnLocation <span class="token operator">=</span> VR_MuzzleLocation<span class="token operator">-></span><span class="token function">GetComponentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				World<span class="token operator">-></span><span class="token generic-function"><span class="token function">SpawnActor</span><span class="token generic class-name"><span class="token operator">&lt;</span>AUnrealCPPProjectile<span class="token operator">></span></span></span><span class="token punctuation">(</span>ProjectileClass<span class="token punctuation">,</span> SpawnLocation<span class="token punctuation">,</span> SpawnRotation<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span>
			<span class="token punctuation">{</span>
				<span class="token keyword">const</span> FRotator SpawnRotation <span class="token operator">=</span> <span class="token function">GetControlRotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">// MuzzleOffset is in camera space, so transform it to world space before offsetting from the character location to find the final muzzle position</span>
				<span class="token keyword">const</span> FVector SpawnLocation <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>FP_MuzzleLocation <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">?</span> FP_MuzzleLocation<span class="token operator">-></span><span class="token function">GetComponentLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> SpawnRotation<span class="token punctuation">.</span><span class="token function">RotateVector</span><span class="token punctuation">(</span>GunOffset<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">//Set Spawn Collision Handling Override</span>
				FActorSpawnParameters ActorSpawnParams<span class="token punctuation">;</span>
				ActorSpawnParams<span class="token punctuation">.</span>SpawnCollisionHandlingOverride <span class="token operator">=</span> ESpawnActorCollisionHandlingMethod<span class="token double-colon punctuation">::</span>AdjustIfPossibleButDontSpawnIfColliding<span class="token punctuation">;</span>

				<span class="token comment">// spawn the projectile at the muzzle</span>
				World<span class="token operator">-></span><span class="token generic-function"><span class="token function">SpawnActor</span><span class="token generic class-name"><span class="token operator">&lt;</span>AUnrealCPPProjectile<span class="token operator">></span></span></span><span class="token punctuation">(</span>ProjectileClass<span class="token punctuation">,</span> SpawnLocation<span class="token punctuation">,</span> SpawnRotation<span class="token punctuation">,</span> ActorSpawnParams<span class="token punctuation">)</span><span class="token punctuation">;</span>

				<span class="token comment">// try and play the sound if specified</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>FireSound <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
				<span class="token punctuation">{</span>
					<span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">PlaySoundAtLocation</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> FireSound<span class="token punctuation">,</span> <span class="token function">GetActorLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>

				<span class="token comment">// try and play a firing animation if specified</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>FireAnimation <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
				<span class="token punctuation">{</span>
					<span class="token comment">// Get the animation object for the arms mesh</span>
					UAnimInstance<span class="token operator">*</span> AnimInstance <span class="token operator">=</span> Mesh1P<span class="token operator">-></span><span class="token function">GetAnimInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>AnimInstance <span class="token operator">!=</span> <span class="token constant">NULL</span><span class="token punctuation">)</span>
					<span class="token punctuation">{</span>
						AnimInstance<span class="token operator">-></span><span class="token function">Montage_Play</span><span class="token punctuation">(</span>FireAnimation<span class="token punctuation">,</span> <span class="token number">1.f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>

				<span class="token function">SetMagicChange</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">20.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">OnResetVR</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">UHeadMountedDisplayFunctionLibrary</span><span class="token double-colon punctuation">::</span><span class="token function">ResetOrientationAndPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">BeginTouch</span><span class="token punctuation">(</span><span class="token keyword">const</span> ETouchIndex<span class="token double-colon punctuation">::</span>Type FingerIndex<span class="token punctuation">,</span> <span class="token keyword">const</span> FVector Location<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>TouchItem<span class="token punctuation">.</span>bIsPressed <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>FingerIndex <span class="token operator">==</span> TouchItem<span class="token punctuation">.</span>FingerIndex<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>TouchItem<span class="token punctuation">.</span>bMoved <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token function">OnFire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	TouchItem<span class="token punctuation">.</span>bIsPressed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	TouchItem<span class="token punctuation">.</span>FingerIndex <span class="token operator">=</span> FingerIndex<span class="token punctuation">;</span>
	TouchItem<span class="token punctuation">.</span>Location <span class="token operator">=</span> Location<span class="token punctuation">;</span>
	TouchItem<span class="token punctuation">.</span>bMoved <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">EndTouch</span><span class="token punctuation">(</span><span class="token keyword">const</span> ETouchIndex<span class="token double-colon punctuation">::</span>Type FingerIndex<span class="token punctuation">,</span> <span class="token keyword">const</span> FVector Location<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>TouchItem<span class="token punctuation">.</span>bIsPressed <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">return</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	TouchItem<span class="token punctuation">.</span>bIsPressed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Commenting this section out to be consistent with FPS BP template.</span>
<span class="token comment">//This allows the user to turn without using the right virtual joystick</span>

<span class="token comment">//void AUnrealCPPCharacter::TouchUpdate(const ETouchIndex::Type FingerIndex, const FVector Location)</span>
<span class="token comment">//{</span>
<span class="token comment">//	if ((TouchItem.bIsPressed == true) &amp;&amp; (TouchItem.FingerIndex == FingerIndex))</span>
<span class="token comment">//	{</span>
<span class="token comment">//		if (TouchItem.bIsPressed)</span>
<span class="token comment">//		{</span>
<span class="token comment">//			if (GetWorld() != nullptr)</span>
<span class="token comment">//			{</span>
<span class="token comment">//				UGameViewportClient* ViewportClient = GetWorld()->GetGameViewport();</span>
<span class="token comment">//				if (ViewportClient != nullptr)</span>
<span class="token comment">//				{</span>
<span class="token comment">//					FVector MoveDelta = Location - TouchItem.Location;</span>
<span class="token comment">//					FVector2D ScreenSize;</span>
<span class="token comment">//					ViewportClient->GetViewportSize(ScreenSize);</span>
<span class="token comment">//					FVector2D ScaledDelta = FVector2D(MoveDelta.X, MoveDelta.Y) / ScreenSize;</span>
<span class="token comment">//					if (FMath::Abs(ScaledDelta.X) >= 4.0 / ScreenSize.X)</span>
<span class="token comment">//					{</span>
<span class="token comment">//						TouchItem.bMoved = true;</span>
<span class="token comment">//						float Value = ScaledDelta.X * BaseTurnRate;</span>
<span class="token comment">//						AddControllerYawInput(Value);</span>
<span class="token comment">//					}</span>
<span class="token comment">//					if (FMath::Abs(ScaledDelta.Y) >= 4.0 / ScreenSize.Y)</span>
<span class="token comment">//					{</span>
<span class="token comment">//						TouchItem.bMoved = true;</span>
<span class="token comment">//						float Value = ScaledDelta.Y * BaseTurnRate;</span>
<span class="token comment">//						AddControllerPitchInput(Value);</span>
<span class="token comment">//					}</span>
<span class="token comment">//					TouchItem.Location = Location;</span>
<span class="token comment">//				}</span>
<span class="token comment">//				TouchItem.Location = Location;</span>
<span class="token comment">//			}</span>
<span class="token comment">//		}</span>
<span class="token comment">//	}</span>
<span class="token comment">//}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">MoveForward</span><span class="token punctuation">(</span><span class="token keyword">float</span> Value<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>Value <span class="token operator">!=</span> <span class="token number">0.0f</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// add movement in that direction</span>
		<span class="token function">AddMovementInput</span><span class="token punctuation">(</span><span class="token function">GetActorForwardVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">MoveRight</span><span class="token punctuation">(</span><span class="token keyword">float</span> Value<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>Value <span class="token operator">!=</span> <span class="token number">0.0f</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// add movement in that direction</span>
		<span class="token function">AddMovementInput</span><span class="token punctuation">(</span><span class="token function">GetActorRightVector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">TurnAtRate</span><span class="token punctuation">(</span><span class="token keyword">float</span> Rate<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// calculate delta for this frame from the rate information</span>
	<span class="token function">AddControllerYawInput</span><span class="token punctuation">(</span>Rate <span class="token operator">*</span> BaseTurnRate <span class="token operator">*</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetDeltaSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">LookUpAtRate</span><span class="token punctuation">(</span><span class="token keyword">float</span> Rate<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// calculate delta for this frame from the rate information</span>
	<span class="token function">AddControllerPitchInput</span><span class="token punctuation">(</span>Rate <span class="token operator">*</span> BaseLookUpRate <span class="token operator">*</span> <span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetDeltaSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">EnableTouchscreenMovement</span><span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">UInputComponent</span><span class="token operator">*</span> PlayerInputComponent<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">FPlatformMisc</span><span class="token double-colon punctuation">::</span><span class="token function">SupportsTouchInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token generic-function"><span class="token function">GetDefault</span><span class="token generic class-name"><span class="token operator">&lt;</span>UInputSettings<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span>bUseMouseForTouch<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		PlayerInputComponent<span class="token operator">-></span><span class="token function">BindTouch</span><span class="token punctuation">(</span>EInputEvent<span class="token double-colon punctuation">::</span>IE_Pressed<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>BeginTouch<span class="token punctuation">)</span><span class="token punctuation">;</span>
		PlayerInputComponent<span class="token operator">-></span><span class="token function">BindTouch</span><span class="token punctuation">(</span>EInputEvent<span class="token double-colon punctuation">::</span>IE_Released<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>EndTouch<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">//Commenting this out to be more consistent with FPS BP template.</span>
		<span class="token comment">//PlayerInputComponent->BindTouch(EInputEvent::IE_Repeat, this, &amp;AUnrealCPPCharacter::TouchUpdate);</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">float</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">GetHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> HealthPercentage<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">float</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">GetMagic</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> MagicPercentage<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

FText <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">GetHealthIntText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	int32 HP <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">RoundHalfFromZero</span><span class="token punctuation">(</span>HealthPercentage <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString HPS <span class="token operator">=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">FromInt</span><span class="token punctuation">(</span>HP<span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString HealthHUD <span class="token operator">=</span> HPS <span class="token operator">+</span> <span class="token function">FString</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"%"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	FText HPText <span class="token operator">=</span> <span class="token class-name">FText</span><span class="token double-colon punctuation">::</span><span class="token function">FromString</span><span class="token punctuation">(</span>HealthHUD<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> HPText<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

FText <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">GetMagicIntText</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	int32 MP <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">RoundHalfFromZero</span><span class="token punctuation">(</span>MagicPercentage<span class="token operator">*</span>FullMagic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString MPS <span class="token operator">=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">FromInt</span><span class="token punctuation">(</span>MP<span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString FullMPS <span class="token operator">=</span> <span class="token class-name">FString</span><span class="token double-colon punctuation">::</span><span class="token function">FromInt</span><span class="token punctuation">(</span>FullMagic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	FString MagicHUD <span class="token operator">=</span> MPS <span class="token operator">+</span> <span class="token function">FString</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> FullMPS<span class="token punctuation">;</span>
	FText MPText <span class="token operator">=</span> <span class="token class-name">FText</span><span class="token double-colon punctuation">::</span><span class="token function">FromString</span><span class="token punctuation">(</span>MagicHUD<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> MPText<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetDamageState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	bCanBeDamaged <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">DamageTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token function">GetWorldTimerManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetTimer</span><span class="token punctuation">(</span>MemberTimerHandle<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>AUnrealCPPCharacter<span class="token double-colon punctuation">::</span>SetDamageState<span class="token punctuation">,</span> <span class="token number">2.0f</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetMagicValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	TimelineValue <span class="token operator">=</span> MyTimeline<span class="token punctuation">.</span><span class="token function">GetPlaybackPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    CurveFloatValue <span class="token operator">=</span> PreviousMagic <span class="token operator">+</span> MagicValue<span class="token operator">*</span>MagicCurve<span class="token operator">-></span><span class="token function">GetFloatValue</span><span class="token punctuation">(</span>TimelineValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    MagicPercentage <span class="token operator">=</span> CurveFloatValue<span class="token punctuation">;</span>
	MagicPercentage <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">Clamp</span><span class="token punctuation">(</span>MagicPercentage<span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> <span class="token number">1.0f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetMagicState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	bCanUseMagic <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	MagicValue <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>GunDefaultMaterial<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		FP_Gun<span class="token operator">-></span><span class="token function">SetMaterial</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> GunDefaultMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">bool</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">PlayFlash</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>redFlash<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		redFlash <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">ReceivePointDamage</span><span class="token punctuation">(</span><span class="token keyword">float</span> Damage<span class="token punctuation">,</span> <span class="token keyword">const</span> UDamageType <span class="token operator">*</span> DamageType<span class="token punctuation">,</span> FVector HitLocation<span class="token punctuation">,</span> FVector HitNormal<span class="token punctuation">,</span> UPrimitiveComponent <span class="token operator">*</span> HitComponent<span class="token punctuation">,</span> FName BoneName<span class="token punctuation">,</span> FVector ShotFromDirection<span class="token punctuation">,</span> AController <span class="token operator">*</span> InstigatedBy<span class="token punctuation">,</span> AActor <span class="token operator">*</span> DamageCauser<span class="token punctuation">,</span> <span class="token keyword">const</span> FHitResult <span class="token operator">&amp;</span> HitInfo<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	bCanBeDamaged <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	redFlash <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token operator">-</span>Damage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">DamageTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">UpdateHealth</span><span class="token punctuation">(</span><span class="token keyword">float</span> HealthChange<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Health <span class="token operator">+=</span> HealthChange<span class="token punctuation">;</span>
	Health <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">Clamp</span><span class="token punctuation">(</span>Health<span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> FullHealth<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PreviousHealth <span class="token operator">=</span> HealthPercentage<span class="token punctuation">;</span>
	HealthPercentage <span class="token operator">=</span> Health<span class="token operator">/</span>FullHealth<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">UpdateMagic</span><span class="token punctuation">(</span><span class="token keyword">float</span> MagicChange<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	Magic <span class="token operator">+=</span> MagicChange<span class="token punctuation">;</span>
	Magic <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">Clamp</span><span class="token punctuation">(</span>Magic<span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> FullMagic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PreviousMagic <span class="token operator">=</span> MagicPercentage<span class="token punctuation">;</span>
	MagicPercentage <span class="token operator">=</span> Magic<span class="token operator">/</span>FullMagic<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPCharacter</span><span class="token double-colon punctuation">::</span><span class="token function">SetMagicChange</span><span class="token punctuation">(</span><span class="token keyword">float</span> MagicChange<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	bCanUseMagic <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	Magic <span class="token operator">+=</span> MagicChange <span class="token punctuation">;</span>
	Magic <span class="token operator">=</span> <span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">Clamp</span><span class="token punctuation">(</span>Magic<span class="token punctuation">,</span> <span class="token number">0.0f</span><span class="token punctuation">,</span> FullMagic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	PreviousMagic <span class="token operator">=</span> MagicPercentage<span class="token punctuation">;</span>
	MagicValue <span class="token operator">+=</span> <span class="token punctuation">(</span>MagicChange<span class="token operator">/</span>FullMagic<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>GunOverheatMaterial<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		FP_Gun<span class="token operator">-></span><span class="token function">SetMaterial</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> GunOverheatMaterial<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	MyTimeline<span class="token punctuation">.</span><span class="token function">PlayFromStart</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>UnrealCPPGameMode.h</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token comment">//enum to store the current state of gameplay</span>
<span class="token function">UENUM</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">enum</span> <span class="token keyword">class</span> <span class="token class-name">EGamePlayState</span>
<span class="token punctuation">{</span>
	EPlaying<span class="token punctuation">,</span>
	EGameOver<span class="token punctuation">,</span>
	EUnknown
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">UCLASS</span><span class="token punctuation">(</span>minimalapi<span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">AUnrealCPPGameMode</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">AGameModeBase</span></span>
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">AUnrealCPPGameMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">Tick</span><span class="token punctuation">(</span><span class="token keyword">float</span> DeltaTime<span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>

	AUnrealCPPCharacter<span class="token operator">*</span> MyCharacter<span class="token punctuation">;</span>
	
	<span class="token comment">/** Returns the current playing state */</span>
	<span class="token function">UFUNCTION</span><span class="token punctuation">(</span>BlueprintPure<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	EGamePlayState <span class="token function">GetCurrentState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span><span class="token punctuation">;</span>

	<span class="token comment">/** Sets a new playing state */</span>
	<span class="token keyword">void</span> <span class="token function">SetCurrentState</span><span class="token punctuation">(</span>EGamePlayState NewState<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span> 
	<span class="token comment">/**Keeps track of the current playing state */</span>
	EGamePlayState CurrentState<span class="token punctuation">;</span>

	<span class="token comment">/**Handle any function calls that rely upon changing the playing state of our game */</span>
	<span class="token keyword">void</span> <span class="token function">HandleNewState</span><span class="token punctuation">(</span>EGamePlayState NewState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h3>UnrealCPPGameMode.cpp</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPGameMode.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPHUD.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Kismet/GameplayStatics.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Engine/World.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UObject/ConstructorHelpers.h"</span></span>

<span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">AUnrealCPPGameMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token operator">:</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	PrimaryActorTick<span class="token punctuation">.</span>bCanEverTick <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

	<span class="token comment">// set default pawn class to our Blueprinted character</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token double-colon punctuation">::</span>FClassFinder<span class="token operator">&lt;</span>APawn<span class="token operator">></span> <span class="token function">PlayerPawnClassFinder</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"/Game/FirstPersonCPP/Blueprints/FirstPersonCharacter"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	DefaultPawnClass <span class="token operator">=</span> PlayerPawnClassFinder<span class="token punctuation">.</span>Class<span class="token punctuation">;</span>

	<span class="token comment">// use our custom HUD class</span>
	HUDClass <span class="token operator">=</span> <span class="token class-name">AUnrealCPPHUD</span><span class="token double-colon punctuation">::</span><span class="token function">StaticClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">SetCurrentState</span><span class="token punctuation">(</span>EGamePlayState<span class="token double-colon punctuation">::</span>EPlaying<span class="token punctuation">)</span><span class="token punctuation">;</span>

	MyCharacter <span class="token operator">=</span> <span class="token generic-function"><span class="token function">Cast</span><span class="token generic class-name"><span class="token operator">&lt;</span>AUnrealCPPCharacter<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">GetPlayerPawn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">Tick</span><span class="token punctuation">(</span><span class="token keyword">float</span> DeltaTime<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">Tick</span><span class="token punctuation">(</span>DeltaTime<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetMapName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>MyCharacter<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">FMath</span><span class="token double-colon punctuation">::</span><span class="token function">IsNearlyZero</span><span class="token punctuation">(</span>MyCharacter<span class="token operator">-></span><span class="token function">GetHealth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.001f</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			<span class="token function">SetCurrentState</span><span class="token punctuation">(</span>EGamePlayState<span class="token double-colon punctuation">::</span>EGameOver<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

EGamePlayState <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">GetCurrentState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">const</span>
<span class="token punctuation">{</span>
	<span class="token keyword">return</span> CurrentState<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">SetCurrentState</span><span class="token punctuation">(</span>EGamePlayState NewState<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	CurrentState <span class="token operator">=</span> NewState<span class="token punctuation">;</span>
	<span class="token function">HandleNewState</span><span class="token punctuation">(</span>CurrentState<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPGameMode</span><span class="token double-colon punctuation">::</span><span class="token function">HandleNewState</span><span class="token punctuation">(</span>EGamePlayState NewState<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">switch</span> <span class="token punctuation">(</span>NewState<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token keyword">case</span> EGamePlayState<span class="token double-colon punctuation">::</span>EPlaying<span class="token operator">:</span>
		<span class="token punctuation">{</span>
			<span class="token comment">// do nothing</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token comment">// Unknown/default state</span>
		<span class="token keyword">case</span> EGamePlayState<span class="token double-colon punctuation">::</span>EGameOver<span class="token operator">:</span>
		<span class="token punctuation">{</span>
			<span class="token class-name">UGameplayStatics</span><span class="token double-colon punctuation">::</span><span class="token function">OpenLevel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token function">FName</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-></span><span class="token function">GetName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
		<span class="token comment">// Unknown/default state</span>
		<span class="token keyword">default</span><span class="token operator">:</span>
		<span class="token keyword">case</span> EGamePlayState<span class="token double-colon punctuation">::</span>EUnknown<span class="token operator">:</span>
		<span class="token punctuation">{</span>
			<span class="token comment">// do nothing</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">break</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>UnrealCPPHUD.h</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">pragma</span> <span class="token expression">once </span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CoreMinimal.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"GameFramework/HUD.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPHUD.generated.h"</span></span>

<span class="token function">UCLASS</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">AUnrealCPPHUD</span> <span class="token operator">:</span> <span class="token base-clause"><span class="token keyword">public</span> <span class="token class-name">AHUD</span></span>
<span class="token punctuation">{</span>
	<span class="token function">GENERATED_BODY</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span><span class="token operator">:</span>
	<span class="token function">AUnrealCPPHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/** Primary draw call for the HUD */</span>
	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">DrawHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>

	<span class="token keyword">virtual</span> <span class="token keyword">void</span> <span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">override</span><span class="token punctuation">;</span>

<span class="token keyword">private</span><span class="token operator">:</span>
	<span class="token comment">/** Crosshair asset pointer */</span>
	<span class="token keyword">class</span> <span class="token class-name">UTexture2D</span><span class="token operator">*</span> CrosshairTex<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	TSubclassOf<span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token class-name">UUserWidget</span><span class="token operator">></span> HUDWidgetClass<span class="token punctuation">;</span>

	<span class="token function">UPROPERTY</span><span class="token punctuation">(</span>EditAnywhere<span class="token punctuation">,</span> Category <span class="token operator">=</span> <span class="token string">"Health"</span><span class="token punctuation">)</span>
	<span class="token keyword">class</span> <span class="token class-name">UUserWidget</span><span class="token operator">*</span> CurrentWidget<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<h3>UnrealCPPHUD.cpp</h3>
<div class="gatsby-highlight" data-language="cpp"><pre class="language-cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UnrealCPPHUD.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Engine/Canvas.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Engine/Texture2D.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"TextureResource.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"CanvasItem.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"UObject/ConstructorHelpers.h"</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">"Blueprint/UserWidget.h"</span></span>


<span class="token class-name">AUnrealCPPHUD</span><span class="token double-colon punctuation">::</span><span class="token function">AUnrealCPPHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// Set the crosshair texture</span>
	<span class="token keyword">static</span> ConstructorHelpers<span class="token double-colon punctuation">::</span>FObjectFinder<span class="token operator">&lt;</span>UTexture2D<span class="token operator">></span> <span class="token function">CrosshairTexObj</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"/Game/FirstPerson/Textures/FirstPersonCrosshair"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	CrosshairTex <span class="token operator">=</span> CrosshairTexObj<span class="token punctuation">.</span>Object<span class="token punctuation">;</span>

	<span class="token keyword">static</span> ConstructorHelpers<span class="token double-colon punctuation">::</span>FClassFinder<span class="token operator">&lt;</span>UUserWidget<span class="token operator">></span> <span class="token function">HealthBarObj</span><span class="token punctuation">(</span><span class="token function">TEXT</span><span class="token punctuation">(</span><span class="token string">"/Game/FirstPerson/UI/Health_UI"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	HUDWidgetClass <span class="token operator">=</span> HealthBarObj<span class="token punctuation">.</span>Class<span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPHUD</span><span class="token double-colon punctuation">::</span><span class="token function">DrawHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">DrawHUD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// Draw very simple crosshair</span>

	<span class="token comment">// find center of the Canvas</span>
	<span class="token keyword">const</span> FVector2D <span class="token function">Center</span><span class="token punctuation">(</span>Canvas<span class="token operator">-></span>ClipX <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">,</span> Canvas<span class="token operator">-></span>ClipY <span class="token operator">*</span> <span class="token number">0.5f</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// offset by half the texture's dimensions so that the center of the texture aligns with the center of the Canvas</span>
	<span class="token keyword">const</span> FVector2D <span class="token function">CrosshairDrawPosition</span><span class="token punctuation">(</span> <span class="token punctuation">(</span>Center<span class="token punctuation">.</span>X<span class="token punctuation">)</span><span class="token punctuation">,</span>
										   <span class="token punctuation">(</span>Center<span class="token punctuation">.</span>Y <span class="token operator">+</span> <span class="token number">20.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">// draw the crosshair</span>
	FCanvasTileItem <span class="token function">TileItem</span><span class="token punctuation">(</span> CrosshairDrawPosition<span class="token punctuation">,</span> CrosshairTex<span class="token operator">-></span>Resource<span class="token punctuation">,</span> FLinearColor<span class="token double-colon punctuation">::</span>White<span class="token punctuation">)</span><span class="token punctuation">;</span>
	TileItem<span class="token punctuation">.</span>BlendMode <span class="token operator">=</span> SE_BLEND_Translucent<span class="token punctuation">;</span>
	Canvas<span class="token operator">-></span><span class="token function">DrawItem</span><span class="token punctuation">(</span> TileItem <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">void</span> <span class="token class-name">AUnrealCPPHUD</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token class-name">Super</span><span class="token double-colon punctuation">::</span><span class="token function">BeginPlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span>HUDWidgetClass <span class="token operator">!=</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		CurrentWidget <span class="token operator">=</span> <span class="token generic-function"><span class="token function">CreateWidget</span><span class="token generic class-name"><span class="token operator">&lt;</span>UUserWidget<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token function">GetWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> HUDWidgetClass<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>CurrentWidget<span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			CurrentWidget<span class="token operator">-></span><span class="token function">AddToViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></div><hr/><section class="author-card"><div><h3 class="tcenter">Author</h3><img class="author-profile-image" src="https://res.cloudinary.com/dz09rnbhe/image/upload/v1515867879/harrison-mcguire_nud24f.jpg" alt="Harrison McGuire"/></div><div class="author-card-content"><h4 class="author-card-name">Harrison McGuire</h4><p class="twitter-handle"><a href="https://harrisonmcguire.com/">harrisonmcguire.com</a></p></div></section><div><a href="https://www.youtube.com/watch?v=Nt4W1B8cKy8" class="ytl-hov"><p class="youtube-link">Please leave any comments or feedback on the YouTube page</p></a></div></div></article></div></main><footer class="site-footer outer"><div class="site-footer-content inner"><section class="copyright"><a href="/">UnrealCPP.com</a> | Unreal Engine 4 C++ tutorials</section><nav><a class="social-logo" href="https://www.youtube.com/c/HarrisonMcGuire"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2499.99 1755.79"><defs></defs><title>youtube-logo</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M1035.38,1753.62c-476.11-8.77-638.72-16.65-738.68-37.25-67.62-13.68-126.39-44.06-169.48-88.12-33.3-33.35-59.79-84.23-80.33-154.83-17.63-58.81-24.49-107.74-34.28-227.27-15-269.76-18.55-490.31,0-736.73C27.92,373.33,35.34,211.78,137,117.53,185,73.42,240.86,45,303.57,33.3,401.53,14.7,818.87,0,1250.92,0c431.08,0,849.35,14.7,947.4,33.3,78.34,14.71,151.81,58.77,194.95,115.59,92.76,145.92,94.39,327.36,103.8,469.29,3.9,67.63,3.9,451.63,0,519.25-14.65,224.3-26.44,303.66-59.74,386-20.59,51.94-38.17,79.36-68.6,109.74a328.55,328.55,0,0,1-174.39,89.14c-412,31-761.88,37.71-1159,31.36Zm630.94-901.3c-229.22-122.5-448.7-236.09-673-353.66v703.43c236.08-128.34,485-245.92,674-350.74l-1,1Z"></path></g></g></svg></a><a class="social-logo" href="https://github.com/Harrison1/unrealcpp"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120.78 117.79"><defs></defs><title>Github Logo</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path class="cls-1" d="M60.39,0A60.39,60.39,0,0,0,41.3,117.69c3,.56,4.12-1.31,4.12-2.91,0-1.44-.05-6.19-.08-11.24C28.54,107.19,25,96.42,25,96.42c-2.75-7-6.71-8.84-6.71-8.84-5.48-3.75.41-3.67.41-3.67,6.07.43,9.26,6.22,9.26,6.22,5.39,9.23,14.13,6.57,17.57,5,.55-3.9,2.11-6.56,3.84-8.07C36,85.55,21.85,80.37,21.85,57.23A23.35,23.35,0,0,1,28.08,41c-.63-1.52-2.7-7.66.58-16,0,0,5.07-1.62,16.61,6.19a57.36,57.36,0,0,1,30.25,0C87,23.42,92.11,25,92.11,25c3.28,8.32,1.22,14.46.59,16a23.34,23.34,0,0,1,6.21,16.21c0,23.2-14.12,28.3-27.57,29.8,2.16,1.87,4.09,5.55,4.09,11.18,0,8.08-.06,14.59-.06,16.57,0,1.61,1.08,3.49,4.14,2.9A60.39,60.39,0,0,0,60.39,0Z"></path><path class="cls-2" d="M22.87,86.7c-.13.3-.6.39-1,.19s-.69-.61-.55-.91.61-.39,1-.19.69.61.54.91Z"></path><path class="cls-2" d="M25.32,89.43c-.29.27-.85.14-1.24-.28a.92.92,0,0,1-.17-1.25c.3-.27.84-.14,1.24.28s.47,1,.17,1.25Z"></path><path class="cls-2" d="M27.7,92.91c-.37.26-1,0-1.35-.52s-.37-1.18,0-1.44,1,0,1.35.51.37,1.19,0,1.45Z"></path><path class="cls-2" d="M31,96.27A1.13,1.13,0,0,1,29.41,96c-.53-.49-.68-1.18-.34-1.54s1-.27,1.56.23.68,1.18.33,1.54Z"></path><path class="cls-2" d="M35.46,98.22c-.15.47-.82.69-1.51.49s-1.13-.76-1-1.24.82-.7,1.51-.49,1.13.76,1,1.24Z"></path><path class="cls-2" d="M40.4,98.58c0,.5-.56.91-1.28.92s-1.3-.38-1.31-.87.56-.92,1.29-.93,1.3.39,1.3.88Z"></path><path class="cls-2" d="M45,97.8c.09.49-.41,1-1.12,1.12s-1.35-.17-1.44-.66.42-1,1.12-1.12,1.35.17,1.44.66Z"></path></g></g></svg></a></nav></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/health-bar-ui-hud/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-441d3dc9b072b8f8d520.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-24bfbb24a3425e1bae90.js\"],\"component---src-pages-tags-js\":[\"/component---src-pages-tags-js-b4c09144224cd18bfb3d.js\"],\"component---src-templates-blog-list-js\":[\"/component---src-templates-blog-list-js-f387ef2be071034bc127.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-73b4d13d184455b9427e.js\"],\"component---src-templates-tags-js\":[\"/component---src-templates-tags-js-53aeb8876af67dac1eda.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="fe29bca9d2665dd3bfb1";</script><script src="/webpack-runtime-fc7fb3bb46a5cad2d98d.js" async></script><script src="/framework-bac559cf616673512d92.js" async></script><script src="/app-441d3dc9b072b8f8d520.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>