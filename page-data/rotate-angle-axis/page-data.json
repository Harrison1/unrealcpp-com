{"componentChunkName":"component---src-templates-blog-post-js","path":"/rotate-angle-axis/","result":{"data":{"site":{"siteMetadata":{"title":"Unreal C++"}},"markdownRemark":{"id":"57dbceb7-acc5-593a-8d01-f446ce3d792b","excerpt":"Github Link: https://github.com/Harrison1/unrealcpp/tree/master/RotateAngleAxis For this tutorial we are using the standard first person C++ template withâ€¦","html":"<p><strong>Github Link: <a href=\"https://github.com/Harrison1/unrealcpp/tree/master/RotateAngleAxis\">https://github.com/Harrison1/unrealcpp/tree/master/RotateAngleAxis</a></strong></p>\n<p><em>For this tutorial we are using the standard first person C++ template with starter content. If you don't know how to add a new actor class to your project, please visit the <a href=\"/add-actor-class\">Add C++ Actor Class</a> post.</em></p>\n<p>In this tutorial we'll learn how to use the <code>RotateAngleAxis</code> function. Start by creating a new <code>C++</code> actor class and call it <strong>RotateAngleAxis</strong>. In the header file we'll create two <code>float</code> variables and two <code>FVector</code> variables and make them <code>EditAnywhere</code> so we can edit them later inside the editor. Below is the final header file code.</p>\n<h3>RotateAngleAxis.h</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\">once</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"GameFramework/Actor.h\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"RotatingAngleAxis.generated.h\"</span></span>\n\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UNREALCPP_API</span> ARotatingAngleAxis <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> AActor\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">// Sets default values for this actor's properties</span>\n\t<span class=\"token function\">ARotatingAngleAxis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">protected</span><span class=\"token operator\">:</span>\n\t<span class=\"token comment\">// Called when the game starts or when spawned</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">override</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\t\n\t<span class=\"token comment\">// Called every frame</span>\n\t<span class=\"token keyword\">virtual</span> <span class=\"token keyword\">void</span> <span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaTime<span class=\"token punctuation\">)</span> <span class=\"token keyword\">override</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">// declare our float variables</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Movement<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> AngleAxis<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Movement<span class=\"token punctuation\">)</span>\n\tFVector Dimensions<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Movement<span class=\"token punctuation\">)</span>\n\tFVector AxisVector<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span> Category <span class=\"token operator\">=</span> Movement<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> Multiplier<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In the <code>.cpp</code> let's start by setting some default values for our actor. I took some time playing around with the variables so I think my default should suffice to get us going, but feel free to change them to whatever you want.</p>\n<h4>default values</h4>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Sets default values</span>\n<span class=\"token class-name\">ARotatingAngleAxis</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ARotatingAngleAxis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n \t<span class=\"token comment\">// Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don't need it.</span>\n\tPrimaryActorTick<span class=\"token punctuation\">.</span>bCanEverTick <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\tDimensions <span class=\"token operator\">=</span> <span class=\"token function\">FVector</span> <span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tAxisVector <span class=\"token operator\">=</span> <span class=\"token function\">FVector</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMultiplier <span class=\"token operator\">=</span> <span class=\"token number\">50.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>All of our logic is going inside the <code>Tick</code> function. For this example we are going to use a fixed vector point, so every frame we want to set our fixed location by setting our <code>NewLocation</code> to a fixed <code>FVector</code>.</p>\n<p>Next, we want to add to our <code>AngleAxis</code> variable which will indicate the degree around the point the actor should move to. We add <code>DeltaTime</code> multiplied by our <code>Multiplier</code> for smooth movement. If <code>AngleAxis</code> is greater than or equal to 360 we re-set the <code>AngleAxis</code> to 0.</p>\n<p>Next, we'll set <code>RotateValue</code> by using the <code>RotateAngleAxis</code> functions from our <code>Dimensions</code> vector. This will return the amount of units needed to move the actor to its next location. Add <code>RotateValue</code>'s X, Y, and Z values to our <code>NewLocation</code> variable accordingly. We will print to the screen the <code>RotateValue</code> and <code>AngleAxis</code> variables to see the values in real time.</p>\n<p>Finally, set the actor's location with <code>SetActorLocation</code> to our <code>NewLocation</code>. To learn more about the <code>RotateAngleAxis</code> function from the Unreal Engine 4 documentation you can click <a href=\"https://docs.unrealengine.com/latest/INT/API/Runtime/Core/Math/FVector/RotateAngleAxis/\">here</a>.</p>\n<h4>Tick function</h4>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Called every frame</span>\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">ARotatingAngleAxis</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaTime<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">Super</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span>DeltaTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tFVector NewLocation <span class=\"token operator\">=</span> <span class=\"token function\">FVector</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">800</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tAngleAxis <span class=\"token operator\">+=</span> DeltaTime <span class=\"token operator\">*</span> Multiplier<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>AngleAxis <span class=\"token operator\">>=</span> <span class=\"token number\">360.0f</span><span class=\"token punctuation\">)</span> \n\t<span class=\"token punctuation\">{</span>\n\t\tAngleAxis <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tFVector RotateValue <span class=\"token operator\">=</span> Dimensions<span class=\"token punctuation\">.</span><span class=\"token function\">RotateAngleAxis</span><span class=\"token punctuation\">(</span>AngleAxis<span class=\"token punctuation\">,</span> AxisVector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tGEngine<span class=\"token operator\">-></span><span class=\"token function\">AddOnScreenDebugMessage</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5.f</span><span class=\"token punctuation\">,</span> FColor<span class=\"token double-colon punctuation\">::</span>Red<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FString</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RotateValue: %s\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>RotateValue<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n\tGEngine<span class=\"token operator\">-></span><span class=\"token function\">AddOnScreenDebugMessage</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5.f</span><span class=\"token punctuation\">,</span> FColor<span class=\"token double-colon punctuation\">::</span>Green<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FString</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AngleAxis: %f\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> AngleAxis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tNewLocation<span class=\"token punctuation\">.</span>X <span class=\"token operator\">+=</span> RotateValue<span class=\"token punctuation\">.</span>X<span class=\"token punctuation\">;</span>\n\tNewLocation<span class=\"token punctuation\">.</span>Y <span class=\"token operator\">+=</span> RotateValue<span class=\"token punctuation\">.</span>Y<span class=\"token punctuation\">;</span>\n\tNewLocation<span class=\"token punctuation\">.</span>Z <span class=\"token operator\">+=</span> RotateValue<span class=\"token punctuation\">.</span>Z<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">SetActorLocation</span><span class=\"token punctuation\">(</span>NewLocation<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> ETeleportType<span class=\"token double-colon punctuation\">::</span>None<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Compile the code. Drag and drop the new actor into the game world. Add a static mesh component to the actor. Now when you push play the actor will find and circle around the given vector point. Below is the final <code>.cpp</code> file.</p>\n<h3>RotatingAngleAxis.cpp</h3>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"RotatingAngleAxis.h\"</span></span>\n\n<span class=\"token comment\">// Sets default values</span>\n<span class=\"token class-name\">ARotatingAngleAxis</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">ARotatingAngleAxis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n \t<span class=\"token comment\">// Set this actor to call Tick() every frame.  You can turn this off to improve performance if you don't need it.</span>\n\tPrimaryActorTick<span class=\"token punctuation\">.</span>bCanEverTick <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\n\tDimensions <span class=\"token operator\">=</span> <span class=\"token function\">FVector</span> <span class=\"token punctuation\">(</span><span class=\"token number\">300</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tAxisVector <span class=\"token operator\">=</span> <span class=\"token function\">FVector</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tMultiplier <span class=\"token operator\">=</span> <span class=\"token number\">50.f</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Called when the game starts or when spawned</span>\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">ARotatingAngleAxis</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">Super</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">BeginPlay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n\t\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// Called every frame</span>\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">ARotatingAngleAxis</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">float</span> DeltaTime<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n\t<span class=\"token class-name\">Super</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Tick</span><span class=\"token punctuation\">(</span>DeltaTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tFVector NewLocation <span class=\"token operator\">=</span> <span class=\"token function\">FVector</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">800</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tAngleAxis <span class=\"token operator\">+=</span> DeltaTime <span class=\"token operator\">*</span> Multiplier<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>AngleAxis <span class=\"token operator\">>=</span> <span class=\"token number\">360.0f</span><span class=\"token punctuation\">)</span> \n\t<span class=\"token punctuation\">{</span>\n\t\tAngleAxis <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\n\tFVector myCharacter <span class=\"token operator\">=</span> <span class=\"token function\">GetWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetFirstPlayerController</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetPawn</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">GetActorLocation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tFVector RotateValue <span class=\"token operator\">=</span> Dimensions<span class=\"token punctuation\">.</span><span class=\"token function\">RotateAngleAxis</span><span class=\"token punctuation\">(</span>AngleAxis<span class=\"token punctuation\">,</span> AxisVector<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tGEngine<span class=\"token operator\">-></span><span class=\"token function\">AddOnScreenDebugMessage</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5.f</span><span class=\"token punctuation\">,</span> FColor<span class=\"token double-colon punctuation\">::</span>Red<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FString</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"RotateValue: %s\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span>RotateValue<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\n\tGEngine<span class=\"token operator\">-></span><span class=\"token function\">AddOnScreenDebugMessage</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5.f</span><span class=\"token punctuation\">,</span> FColor<span class=\"token double-colon punctuation\">::</span>Green<span class=\"token punctuation\">,</span> <span class=\"token class-name\">FString</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Printf</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"AngleAxis: %f\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> AngleAxis<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\tNewLocation<span class=\"token punctuation\">.</span>X <span class=\"token operator\">+=</span> RotateValue<span class=\"token punctuation\">.</span>X<span class=\"token punctuation\">;</span>\n\tNewLocation<span class=\"token punctuation\">.</span>Y <span class=\"token operator\">+=</span> RotateValue<span class=\"token punctuation\">.</span>Y<span class=\"token punctuation\">;</span>\n\tNewLocation<span class=\"token punctuation\">.</span>Z <span class=\"token operator\">+=</span> RotateValue<span class=\"token punctuation\">.</span>Z<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">SetActorLocation</span><span class=\"token punctuation\">(</span>NewLocation<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> ETeleportType<span class=\"token double-colon punctuation\">::</span>None<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"Rotate Angle Axis","date":"December 02, 2017","description":"Learn how to use the RotateAngleAxis function.","image":"https://res.cloudinary.com/dz09rnbhe/image/upload/unrealcpp/rotating-angle-axis_rkpyse.jpg","tags":["rotation","location"],"video":"ZoMoG0yhwg8","uev":"4.18.3"}},"previous":{"fields":{"slug":"/light-switch-push-button/"},"frontmatter":{"title":"Light Switch on Button Press"}},"next":{"fields":{"slug":"/rotate-around-vector/"},"frontmatter":{"title":"Rotate Around Vector"}}},"pageContext":{"id":"57dbceb7-acc5-593a-8d01-f446ce3d792b","previousPostId":"b9549098-1ce6-5a99-95ae-e70d71dc6ca5","nextPostId":"2a40dbb9-ed82-5882-b02b-43a76ae92335"}},"staticQueryHashes":[],"slicesMap":{}}